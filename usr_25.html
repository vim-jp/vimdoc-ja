---
layout: vimdoc
helpname: 'usr_25'
---
<div id='vimCodeElement'>
<a class="Constant" href="usr_25.html" name="usr_25.txt">*usr_25.txt*</a>&nbsp;&nbsp;&nbsp;&nbsp;For Vim バージョン 7.4.&nbsp;&nbsp;Last change: 2014 Oct 29<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; VIM USER MANUAL - by Bram Moolenaar<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;テキストの整形<br>
<br>
<br>
文章を一行に一文ずつ書くようなことはほとんどありません。この章では、テキストが<br>
画面に収まるように整形する方法などを説明します。<br>
一行段落や表を編集するための便利な機能もあります。<br>
<br>
<a class="Identifier" href="usr_25.html#25.1">|25.1|</a>&nbsp;&nbsp;行を改行する<br>
<a class="Identifier" href="usr_25.html#25.2">|25.2|</a>&nbsp;&nbsp;テキストの位置揃え<br>
<a class="Identifier" href="usr_25.html#25.3">|25.3|</a>&nbsp;&nbsp;インデントとタブ<br>
<a class="Identifier" href="usr_25.html#25.4">|25.4|</a>&nbsp;&nbsp;長い行の扱い<br>
<a class="Identifier" href="usr_25.html#25.5">|25.5|</a>&nbsp;&nbsp;表の編集<br>
<br>
次章:&nbsp;<a class="Identifier" href="usr_26.html">|usr_26.txt|</a>&nbsp;&nbsp;繰り返し<br>
前章:&nbsp;<a class="Identifier" href="usr_24.html">|usr_24.txt|</a>&nbsp;&nbsp;素早く入力する<br>
目次:&nbsp;<a class="Identifier" href="usr_toc.html">|usr_toc.txt|</a><br>
<br>
<span class="PreProc">==============================================================================</span><br>
<a class="Constant" href="usr_25.html#25.1" name="25.1">*25.1*</a>&nbsp;&nbsp;行を改行する<br>
<br>
文章を快適に編集するための機能がいくつかあります。初期設定では行は自動的に改行<br>
されません。つまり自分で&nbsp;<span class="Special">&lt;Enter&gt;</span>&nbsp;を押す必要があります。プログラムを書くときは<br>
その方が便利ですが、ドキュメントを書くときは少し不便です。文章が 70 桁の幅に収<br>
まるように自分で整形するのは大変でしょう。<br>
<a class="Type" href="options.html#'textwidth'">'textwidth'</a>&nbsp;オプションを設定すると、行が自動的に改行されるようになります。例え<br>
ば、30 桁の幅で文章を書きたい場合は次のように設定します:<br>
<br>
<div class="helpExample">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:set textwidth=30</div>
<br>
そして、テキストを入力します (上の数字はルーラーです):<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 1&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 2&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 3<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;12345678901234567890123456789012345<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="PreProc">I taught programming for a whi</span><br>
<br>
次に &quot;l&quot; を入力すると一行が 30 桁の制限を超えるので、自動的に改行が挿入されま<br>
す。その結果、次のようになります:<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 1&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 2&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 3<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;12345678901234567890123456789012345<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="PreProc">I taught programming for a</span><br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="PreProc">whil</span><br>
<br>
そのまま続けて文章の残りを入力しましょう:<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 1&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 2&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 3<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;12345678901234567890123456789012345<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="PreProc">I taught programming for a</span><br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="PreProc">while. One time, I was stopped</span><br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="PreProc">by the Fort Worth police,</span><br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="PreProc">because my homework was too</span><br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="PreProc">hard. True story.</span><br>
<br>
自分で改行する必要はありません。改行は自動的に挿入されます。<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="Todo">Note</span>:<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="Type" href="options.html#'wrap'">'wrap'</a>&nbsp;オプションを使うと長い行を改行して表示できますが、実際に改行文<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;字が挿入されるわけではありません。<br>
<br>
<br>
再整形<br>
<span class="PreProc">------</span><br>
<br>
Vim はワードプロセッサではありません。ワードプロセッサなら、段落の最初の方で<br>
文字を削除すると、改行の位置が調整されますが、Vim は違います。つまり、一行目<br>
の &quot;programming&quot; を削除すると、単にその行が短くなるだけです:<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 1&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 2&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 3<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;12345678901234567890123456789012345<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="PreProc">I taught for a</span><br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="PreProc">while. One time, I was stopped</span><br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="PreProc">by the Fort Worth police,</span><br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="PreProc">because my homework was too</span><br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="PreProc">hard. True story.</span><br>
<br>
これはよくありません。&quot;gq&quot; オペレータを使って段落を整形しましょう。<br>
まず、ビジュアルモードを使ってやってみます。一行目に移動して次のように入力しま<br>
す:<br>
<br>
<div class="helpExample">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;v4jgq</div>
<br>
&quot;v&quot; はビジュアルモードの開始、&quot;4j&quot; で段落の最後まで移動し、&quot;gq&quot; オペレータを実<br>
行します。結果:<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 1&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 2&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 3<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;12345678901234567890123456789012345<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="PreProc">I taught for a while. One</span><br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="PreProc">time, I was stopped by the</span><br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="PreProc">Fort Worth police, because my</span><br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="PreProc">homework was too hard. True</span><br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="PreProc">story.</span><br>
<br>
<span class="Todo">Note</span>: 特定の書式に従った文章なら自動的に整形することもできます。<br>
<a class="Identifier" href="change.html#auto-format">|auto-format|</a>&nbsp;参照。<br>
<br>
&quot;gp&quot; はオペレータなので、ビジュアルモード、カーソルモーション、テキストオブジェ<br>
クト、の三つの方法で適用範囲を選択できます。<br>
上記の例は &quot;gq4j&quot; とすることもできます。これはコマンドは短くなりますが、行数を<br>
数えないといけません。&quot;}&quot; というモーションコマンドを使えばもっと簡単です。これ<br>
は段落の末尾に移動するコマンドです。&quot;gq}&quot; でカーソル位置から段落の末尾までが整<br>
形されます。<br>
テキストオブジェクトを使うともっと簡単にできます:<br>
<br>
<div class="helpExample">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;gqap</div>
<br>
&quot;ap&quot; は &quot;a-paragraph&quot; という意味です。(空行区切りの) 一つの段落が整形されます。<br>
カーソル位置より前の部分も範囲に入ります。<br>
段落が空行で区切られているなら、次のコマンドでファイル全体を整形できます:<br>
<br>
<div class="helpExample">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;gggqG</div>
<br>
&quot;gg&quot; でファイル先頭に移動し、&quot;gqG&quot; でファイル末尾まで整形します。<br>
警告: 段落が適切に区切られていない場合、それらの文章は一つにつながってしまいま<br>
す。スペースや Tab 文字だけの行があったりするのはよくあるミスです。それは空白<br>
行です。空行ではありません。<br>
<br>
整形できるのは単純なプレーンテキストだけではありません。整形の設定については<br>
<a class="Identifier" href="change.html#fo-table">|fo-table|</a>&nbsp;を参照してください。ピリオドの後ろに挿入されるスペースの数を変更す<br>
るには&nbsp;<a class="Type" href="options.html#'joinspaces'">'joinspaces'</a>&nbsp;を参照してください。<br>
外部プログラムを使って整形することもできます。Vim の組み込みコマンドで正しく整<br>
形できないようなテキストを編集するのに便利です。<a class="Type" href="options.html#'formatprg'">'formatprg'</a>&nbsp;オプション参照。<br>
<br>
<span class="PreProc">==============================================================================</span><br>
<a class="Constant" href="usr_25.html#25.2" name="25.2">*25.2*</a>&nbsp;&nbsp;テキストの位置揃え<br>
<br>
テキストを中央揃えするには、次のコマンドを使います:<br>
<br>
<div class="helpExample">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:{range}center [width]</div>
<br>
<span class="Special">{range}</span>&nbsp;は通常のコマンドライン範囲指定です。&nbsp;<span class="Special">[width]</span>&nbsp;には中央揃えに使う行の幅<br>
を指定できます。&nbsp;<span class="Special">[width]</span>&nbsp;を指定しなかった場合は&nbsp;<a class="Type" href="options.html#'textwidth'">'textwidth'</a>&nbsp;の設定が使われま<br>
す。(<a class="Type" href="options.html#'textwidth'">'textwidth'</a>&nbsp;が 0 なら 80 が使われます)<br>
例:<br>
<br>
<div class="helpExample">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:1,5center 40</div>
<br>
次のような結果になります:<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="PreProc">I taught for a while. One</span><br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="PreProc">time, I was stopped by the</span><br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="PreProc">Fort Worth police, because my</span><br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="PreProc">homework was too hard. True</span><br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="PreProc">story.</span><br>
<br>
<br>
右端揃え<br>
<span class="PreProc">--------</span><br>
<br>
同様に、右端揃えするには &quot;:right&quot; コマンドを使います:<br>
<br>
<div class="helpExample">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:1,5right 37</div>
<br>
結果:<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="PreProc">I taught for a while. One</span><br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="PreProc">time, I was stopped by the</span><br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="PreProc">Fort Worth police, because my</span><br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="PreProc">homework was too hard. True</span><br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="PreProc">story.</span><br>
<br>
左端揃え<br>
<span class="PreProc">--------</span><br>
<br>
次のコマンドで左端揃えできます:<br>
<br>
<div class="helpExample">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:{range}left [margin]</div>
<br>
&quot;:center&quot; や &quot;:right&quot; と違い、&quot;:left&quot; の引数に指定する値は行の幅ではありませ<br>
ん。左マージンを指定します。省略した場合は、文章は左端にぴったり寄せられます<br>
(マージンに 0 を指定したのと同じ)。5 を指定した場合は 5 つのスペースでインデン<br>
トされます。例えば、次のように使います:<br>
<br>
<div class="helpExample">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:1left 5<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:2,5left</div>
<br>
次のような結果になります:<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="PreProc">I taught for a while. One</span><br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="PreProc">time, I was stopped by the</span><br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="PreProc">Fort Worth police, because my</span><br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="PreProc">homework was too hard. True</span><br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="PreProc">story.</span><br>
<br>
<br>
両端揃え<br>
<span class="PreProc">--------</span><br>
<br>
両端揃えするための組み込みコマンドはありません。しかし、そのためのマクロパッ<br>
ケージが用意されています。パッケージを使うには、次のコマンドを実行します:<br>
<br>
<div class="helpExample">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:runtime macros/justify.vim</div>
<br>
新しいビジュアルモードコマンド &quot;_j&quot; が定義されます。ビジュアルモードで範囲選択<br>
して &quot;_j&quot; を実行すればテキストを両端揃えできます。<br>
詳しい説明はスクリプトファイルを参照してください。この名前の上で &quot;gf&quot; を使えば<br>
ファイルを開けます: $VIMRUNTIME/macros/justify.vim<br>
<br>
外部コマンドを使って整形することもできます。例:<br>
<br>
<div class="helpExample">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:%!fmt</div>
<br>
<span class="PreProc">==============================================================================</span><br>
<a class="Constant" href="usr_25.html#25.3" name="25.3">*25.3*</a>&nbsp;&nbsp;インデントとタブ<br>
<br>
テキストをインデントすればその部分を目立たせることができます。例えばこのマニュ<br>
アルでは、例文を示すときに 8 個のスペースまたは Tab 文字でインデントしていま<br>
す。通常なら行頭で Tab キーを押せばインデントできます。例:<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="PreProc">the first line</span><br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="PreProc">the second line</span><br>
<br>
Tab キーを押してテキストを挿入、<span class="Special">&lt;Enter&gt;</span>、また Tab キーを押してテキストを挿入し<br>
ます。<br>
<a class="Type" href="options.html#'autoindent'">'autoindent'</a>&nbsp;オプションを設定すると、自動的にインデントできます:<br>
<br>
<div class="helpExample">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:set autoindent</div>
<br>
新しい行を開始すると、直前の行と同じだけのインデントが挿入されます。上の例な<br>
ら、<span class="Special">&lt;Enter&gt;</span>&nbsp;を押した後の Tab キーが必要なくなります。<br>
<br>
<br>
インデントを増やす<br>
<span class="PreProc">------------------</span><br>
<br>
行のインデント量を増やすには &quot;&gt;&quot; オペレータを使います。現在行のインデントを増<br>
やしたい場合は &quot;&gt;&gt;&quot; を使うと簡単です。<br>
インデントの増加量は&nbsp;<a class="Type" href="options.html#'shiftwidth'">'shiftwidth'</a>&nbsp;オプションで設定できます。初期設定は 8 です。<br>
例えば、&quot;&gt;&gt;&quot; でスペース 4 つ分のインデントを増やしたい場合は次のように設定しま<br>
す:<br>
<br>
<div class="helpExample">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:set shiftwidth=4</div>
<br>
上記例文の二行目で &quot;&gt;&gt;&quot; を使うと、次のようになります:<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="PreProc">the first line</span><br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="PreProc">the second line</span><br>
<br>
&quot;4&gt;&gt;&quot; は四つの行のインデントを増やすコマンドです。<br>
<br>
<br>
タブストップ<br>
<span class="PreProc">------------</span><br>
<br>
インデントを 4 桁にしたい場合は&nbsp;<a class="Type" href="options.html#'shiftwidth'">'shiftwidth'</a>&nbsp;を 4 に設定します。しかしそれだけ<br>
では、<span class="Special">&lt;Tab&gt;</span>&nbsp;を押したときのインデントの量はスペース 8 個分のままです。これを変<br>
更するには&nbsp;<a class="Type" href="options.html#'softtabstop'">'softtabstop'</a>&nbsp;オプションを設定します:<br>
<br>
<div class="helpExample">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:set softtabstop=4</div>
<br>
これで、<span class="Special">&lt;Tab&gt;</span>&nbsp;キーがスペース 4 個分のインデントになります。既に 4 つスペースで<br>
インデントされている場合は&nbsp;<span class="Special">&lt;Tab&gt;</span>&nbsp;文字に置き換えられます (7 バイト節約)。(Tab<br>
文字を使いたくない場合は&nbsp;<a class="Type" href="options.html#'expandtab'">'expandtab'</a>&nbsp;を設定してください。)<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="Todo">Note</span>:<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="Type" href="options.html#'tabstop'">'tabstop'</a>&nbsp;オプションを 4 に設定することもできますが、その設定で編集し<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;たファイルを&nbsp;<a class="Type" href="options.html#'tabstop'">'tabstop'</a>&nbsp;の初期設定 (8) で見ると見た目が崩れてしまいま<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;す。他のプログラムで印刷する場合もインデントが崩れてしまうかもしれませ<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ん。したがって、<a class="Type" href="options.html#'tabstop'">'tabstop'</a>&nbsp;は常に 8 のままにしておきましょう。それが標<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;準的な値です。<br>
<br>
<br>
TAB幅を変更する<br>
<span class="PreProc">---------------</span><br>
<br>
tabstop が 3 で書かれたファイルを (tabstop が 8 の) Vim で開くと表示が崩れてし<br>
まいます。<a class="Type" href="options.html#'tabstop'">'tabstop'</a>&nbsp;を 3 に設定すれば表示を直すことができますが、ファイルを開<br>
くたびに設定を変更しなければなりません。<br>
ファイルの tabstop 幅を変更することができます。インデントが正しく表示されるよ<br>
うに&nbsp;<a class="Type" href="options.html#'tabstop'">'tabstop'</a>&nbsp;を設定してから &quot;:retab&quot; コマンドを使います:<br>
<br>
<div class="helpExample">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:set tabstop=3<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:retab 8</div>
<br>
&quot;:retab&quot; コマンドを使って&nbsp;<a class="Type" href="options.html#'tabstop'">'tabstop'</a>&nbsp;を 8 に変更しています。ただし、テキストの<br>
見た目は変更されません。空白部分が Tab 文字とスペースに置き換えられます。その<br>
状態でファイルを保存すれば、次からは設定を変更しなくてもインデントが正しく表示<br>
されます。<br>
警告: プログラムに対して &quot;:retab&quot; を使った場合、文字列定数の中の空白記号が変更<br>
されてしまうかもしれません。文字列定数の中では Tab 文字ではなく &quot;\t&quot; を使うよ<br>
うにしましょう。<br>
<br>
<span class="PreProc">==============================================================================</span><br>
<a class="Constant" href="usr_25.html#25.4" name="25.4">*25.4*</a>&nbsp;&nbsp;長い行の扱い<br>
<br>
ウィンドウの幅に収まりきらないようなファイルを編集することがあると思います。そ<br>
の場合、すべての行が画面に収まるように折り返して表示されます。<br>
<a class="Type" href="options.html#'wrap'">'wrap'</a>&nbsp;オプションをオフにすると、すべての行が一行で表示されます。長い行の画面<br>
に収まりきらない部分は表示されません。<br>
表示されていない部分にカーソルを動かすと、テキストがスクロールされ、その部分が<br>
表示されます。ウィンドウの枠を右に動かすような感じです。<br>
初期設定では、GUI の水平スクロールバーは表示されません。表示したい場合は次のコ<br>
マンドを使います:<br>
<br>
<div class="helpExample">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:set guioptions+=b</div>
<br>
Vim ウィンドウの下部に水平スクロールバーが表示されます。<br>
<br>
スクロールバーが使えない、または使いたくない場合は、次のコマンドでテキストをス<br>
クロールしてください。カーソルは同じ位置にとどまりますが、画面外に出てしまうと<br>
きは画面内に移動されます。<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;zh&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;右にスクロール<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;4zh&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 右に 4 文字分スクロール<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;zH&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;右にウィンドウの半分だけスクロール<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ze&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;カーソル位置が右端になるように右スクロール<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;zl&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;左にスクロール<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;4zl&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 左に 4 文字分スクロール<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;zL&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;左にウィンドウの半分だけスクロール<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;zs&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;カーソル位置が左端になるように左スクロール<br>
<br>
例を使って説明します。カーソルは &quot;which&quot; の &quot;w&quot; にあります。上部の &quot;current<br>
window&quot; はウィンドウに表示されている範囲を示しています。コマンド実行後の表示範<br>
囲を &quot;window&quot; で示します。<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|&lt;-- current window --&gt;|<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="PreProc">some long text, part of which is visible in the window</span><br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ze&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|&lt;--&nbsp;&nbsp;&nbsp;&nbsp; window&nbsp;&nbsp;&nbsp;&nbsp; --&gt;|<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;zH&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |&lt;--&nbsp;&nbsp;&nbsp;&nbsp; window&nbsp;&nbsp;&nbsp;&nbsp; --&gt;|<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;4zh&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |&lt;--&nbsp;&nbsp;&nbsp;&nbsp; window&nbsp;&nbsp;&nbsp;&nbsp; --&gt;|<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;zh&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |&lt;--&nbsp;&nbsp;&nbsp;&nbsp; window&nbsp;&nbsp;&nbsp;&nbsp; --&gt;|<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;zl&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |&lt;--&nbsp;&nbsp;&nbsp;&nbsp; window&nbsp;&nbsp;&nbsp;&nbsp; --&gt;|<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;4zl&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |&lt;--&nbsp;&nbsp;&nbsp;&nbsp; window&nbsp;&nbsp;&nbsp;&nbsp; --&gt;|<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;zL&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|&lt;--&nbsp;&nbsp;&nbsp;&nbsp; window&nbsp;&nbsp;&nbsp;&nbsp; --&gt;|<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;zs&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |&lt;--&nbsp;&nbsp;&nbsp;&nbsp; window&nbsp;&nbsp;&nbsp;&nbsp; --&gt;|<br>
<br>
<br>
折り返し無しの場合の移動<br>
<span class="PreProc">------------------------</span><br>
<br>
<a class="Type" href="options.html#'wrap'">'wrap'</a>&nbsp;がオフで、テキストが水平スクロールされているとき、次のコマンドで画面の<br>
表示範囲を基準にして移動できます。ウィンドウの左右のテキストは無視されます。こ<br>
れらのコマンドはテキストをスクロールしません:<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;g0&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;行の右端に移動<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;g^&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;行の右端の最初の非空白文字に移動<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;gm&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;行の中央に移動<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;g$&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;行の左端に移動<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|&lt;--&nbsp;&nbsp;&nbsp;&nbsp; window&nbsp;&nbsp;&nbsp;&nbsp;--&gt;|<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="PreProc">some long&nbsp;&nbsp;&nbsp;&nbsp;text, part of which is visible</span><br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; g0&nbsp;&nbsp;g^&nbsp;&nbsp;&nbsp;&nbsp;gm&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;g$<br>
<br>
<br>
禁則処理&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="Constant" href="usr_25.html#edit-no-break" name="edit-no-break">*edit-no-break*</a><br>
<span class="PreProc">--------</span><br>
<br>
他のプログラムで使うテキストを編集する場合、一つの段落を改行無しで書かなければ<br>
ならないことがあります。<a class="Type" href="options.html#'nowrap'">'nowrap'</a>&nbsp;を使うと編集中の文全体を表示することができま<br>
せん。<a class="Type" href="options.html#'wrap'">'wrap'</a>&nbsp;をオンにすると単語の途中で行が折り返されて読み難くなってしまいま<br>
す。<br>
そのような場合は&nbsp;<a class="Type" href="options.html#'linebreak'">'linebreak'</a>&nbsp;オプションを使ってください。適切な場所で行が折り<br>
返されるようになります。ファイルの内容は変更されません。<br>
<a class="Type" href="options.html#'linebreak'">'linebreak'</a>&nbsp;がオフの状態では次のように表示されますが:<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+---------------------------------+<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|letter generation program for a b|<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|ank.&nbsp;&nbsp;They wanted to send out a s|<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|pecial, personalized letter to th|<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|eir richest 1000 customers.&nbsp;&nbsp;Unfo|<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|rtunately for the programmer, he |<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+---------------------------------+<br>
<br>
<a class="Type" href="options.html#'linebreak'">'linebreak'</a>&nbsp;を設定すると:<br>
<br>
<div class="helpExample">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:set linebreak</div>
<br>
次のように表示されます:<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+---------------------------------+<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|letter generation program for a&nbsp;&nbsp;|<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|bank.&nbsp;&nbsp;They wanted to send out a |<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|special, personalized letter to&nbsp;&nbsp;|<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|their richest 1000 customers.&nbsp;&nbsp;&nbsp;&nbsp;|<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|Unfortunately for the programmer,|<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+---------------------------------+<br>
<br>
関連オプション:<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="Type" href="options.html#'breakat'">'breakat'</a>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 折り返し可能な文字を指定する。<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="Type" href="options.html#'showbreak'">'showbreak'</a>&nbsp;&nbsp;&nbsp;&nbsp; 折り返された行の先頭に表示される文字。<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="Type" href="options.html#'textwidth'">'textwidth'</a>&nbsp;&nbsp;&nbsp;&nbsp; 0 に設定して段落が改行されないようにしてください。<br>
<br>
<br>
表示行単位の移動<br>
<span class="PreProc">----------------</span><br>
<br>
&quot;j&quot; と &quot;k&quot; で上下の行に移動できますが、長い行の上で使うと、一度に複数の表示行<br>
を移動することになります。<br>
画面上で一行だけ移動したい場合は &quot;gj&quot; と &quot;gk&quot; を使ってください。行が折り返され<br>
ていないときは &quot;j&quot; と &quot;k&quot; と同じ動作をします。折り返されているときは、画面上の<br>
一行だけ移動します。<br>
次のようなマップを定義しておくと便利かもしれません:<br>
<br>
<div class="helpExample">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:map &lt;Up&gt; gk<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:map &lt;Down&gt; gj</div>
<br>
<br>
段落を一行につなげる&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="Constant" href="usr_25.html#edit-paragraph-join" name="edit-paragraph-join">*edit-paragraph-join*</a><br>
<span class="PreProc">--------------------</span><br>
<br>
MS-Word のようなプログラムにテキストをコピーするとき、段落は一行につながってい<br>
なければなりません。段落が空行で区切られているなら、次のコマンドでそれぞれの段<br>
落を一行につなげることができます:<br>
<br>
<div class="helpExample">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:g/./,/^$/join</div>
<br>
すこし複雑ですね。分解して説明します:<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:g/./&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 一文字以上の文字を含んでいる行を探す&quot;:global&quot;コマンド<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ,/^$/&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;現在行(非空行)から空行までの範囲を指定<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;join&nbsp;&nbsp;指定された範囲の行を &quot;:join&quot; コマンドで一行につなげる<br>
<br>
30 桁で改行された次のようなテキストが:<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+----------------------------------+<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|A letter generation program&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|for a bank.&nbsp;&nbsp;They wanted to&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|send out a special,&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|personalized letter.&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|To their richest 1000&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|customers.&nbsp;&nbsp;Unfortunately for&nbsp;&nbsp;&nbsp;&nbsp; |<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|the programmer,&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+----------------------------------+<br>
<br>
二行にまとめられます:<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+----------------------------------+<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|A letter generation program for a |<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|bank.&nbsp;&nbsp;They wanted to send out a s|<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|pecial, personalized letter.&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|To their richest 1000 customers.&nbsp;&nbsp;|<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|Unfortunately for the programmer, |<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+----------------------------------+<br>
<br>
<span class="Todo">Note</span>: スペースや Tab 文字を含んでいる空白行 (空行ではない) で段落が区切られて<br>
いる場合、上記のコマンドは機能しません。次のコマンドは空白行でも機能します:<br>
<br>
<div class="helpExample">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:g/\S/,/^\s*$/join</div>
<br>
最後の段落を処理するには、ファイル末尾に空行または空白行が必要です。<br>
<br>
<span class="PreProc">==============================================================================</span><br>
<a class="Constant" href="usr_25.html#25.5" name="25.5">*25.5*</a>&nbsp;&nbsp;表の編集<br>
<br>
次のような 4 列の表を編集していて:<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="PreProc">nice table&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;test 1&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;test 2&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;test 3</span><br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="PreProc">input A&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 0.534</span><br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="PreProc">input B&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 0.913</span><br>
<br>
4 列目に数字を入力したいと思いました。2 行目に移動して &quot;A&quot; を使い、いくつかス<br>
ペースとテキストを入力すればできます。<br>
このような編集のための特別なオプションがあります:<br>
<br>
<div class="helpExample">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;set virtualedit=all</div>
<br>
これを設定すると、文字が無い場所にもカーソルを移動できるようになります。これを<br>
&quot;virtual space&quot; (仮想空白) と呼びます。この方法を使えば簡単に表を編集できます。<br>
検索を実行して 4 列目のヘッダーに移動します:<br>
<br>
<div class="helpExample">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/test 3</div>
<br>
&quot;j&quot; を押すとカーソルが適切な場所に移動するので、そのまま &quot;input A&quot; の値を入力<br>
できます。&quot;0.693&quot; と入力します:<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="PreProc">nice table&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;test 1&nbsp;&nbsp;&nbsp;&nbsp; test 2&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;test 3</span><br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="PreProc">input A&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 0.534&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;0.693</span><br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="PreProc">input B&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 0.913</span><br>
<br>
テキストが無かった部分は空白で埋められます。&quot;Bj&quot; コマンドを使って次の行に移動<br>
しましょう。&quot;B&quot; で単語の先頭に移動し、&quot;j&quot; で次のフィールドに移動します。<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="Todo">Note</span>:<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;画面上のどの場所にでもカーソルを移動できます。行末を超えて移動すること<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;もできます。文字を挿入しない限り、スペースは挿入されません。<br>
<br>
<br>
列のコピー<br>
<span class="PreProc">----------</span><br>
<br>
4 列目をコピーして &quot;test 1&quot; 列の前に追加します。次の手順でできます:<br>
1. カーソルを列の左上隅に移動する。例: &quot;/test 3&quot;。<br>
2.&nbsp;<span class="Special">CTRL-V</span>&nbsp;を押して矩形選択開始。<br>
3. &quot;2j&quot; で二行下に移動。カーソルは仮想空白の上 (&quot;input B&quot; 行の &quot;test 3&quot; 列)<br>
4. 右に移動して列全体を選択。列を区切るためのスペースも選択する。例えば &quot;9l&quot;<br>
&nbsp;&nbsp; で移動する。<br>
5. &quot;y&quot; で選択範囲をヤンク。<br>
6. カーソルを &quot;text 1&quot; に移動。この場所に新しい列を挿入する。<br>
7. &quot;P&quot; を押す。<br>
<br>
結果は次のようになります:<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="PreProc">nice table&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;test 3&nbsp;&nbsp;&nbsp;&nbsp;test 1&nbsp;&nbsp;&nbsp;&nbsp; test 2&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;test 3</span><br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="PreProc">input A&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 0.693&nbsp;&nbsp;&nbsp;&nbsp; 0.534&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;0.693</span><br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="PreProc">input B&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 0.913</span><br>
<br>
&quot;test 1&quot; 列全体が右側に押し出されます。&quot;test 3&quot; 列のテキストが無い行も同様に移<br>
動していますね。<br>
<br>
次のコマンドでカーソル移動を通常に戻せます:<br>
<br>
<div class="helpExample">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:set virtualedit=</div>
<br>
<br>
バーチャル置換モード<br>
<span class="PreProc">--------------------</span><br>
<br>
<a class="Type" href="options.html#'virtualedit'">'virtualedit'</a>&nbsp;の不便なところは感覚が狂ってしまうところです。カーソルを動かして<br>
いるときに、カーソルが Tab 文字の上にあるのか、行末を越えた位置にあるのか、認<br>
識することができません。そこで「バーチャル置換モード」を使います。<br>
例えば、表の中で Tab 文字が使われているとします。その Tab 文字の上で &quot;rx&quot; を<br>
使ってみます:<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="PreProc">inp&nbsp;&nbsp;&nbsp;&nbsp; 0.693&nbsp;&nbsp; 0.534&nbsp;&nbsp; 0.693</span><br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; rx&nbsp;&nbsp;|<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; V<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="PreProc">inpx0.693&nbsp;&nbsp; 0.534&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 0.693</span><br>
<br>
レイアウトが崩れてしまいました。こうならないように、&quot;gr&quot; コマンドを使います:<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="PreProc">inp&nbsp;&nbsp;&nbsp;&nbsp; 0.693&nbsp;&nbsp; 0.534&nbsp;&nbsp; 0.693</span><br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;grx&nbsp;&nbsp;|<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; V<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="PreProc">inpx&nbsp;&nbsp;&nbsp;&nbsp;0.693&nbsp;&nbsp; 0.534&nbsp;&nbsp; 0.693</span><br>
<br>
&quot;gr&quot; コマンドで置換すると、置換した結果がスクリーン上で同じ幅になるように調整<br>
されます。足りない分はスペースか Tab 文字で埋められます。つまり上の例は、Tab<br>
文字が &quot;x&quot; で置換され、残りの部分を埋めるように空白が追加されたのです。例では<br>
Tab 文字が挿入されてます。<br>
複数の文字を置き換えたい場合は &quot;R&quot; コマンドの置換モード (<a class="Identifier" href="usr_04.html#04.9">|04.9|</a>参照) を使いま<br>
すが、それだとレイアウトが崩れて意図しない文字が置換されてしまいます:<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="PreProc">inp&nbsp;&nbsp;&nbsp;&nbsp; 0&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 0.534&nbsp;&nbsp; 0.693</span><br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; R0.786 |<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;V<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="PreProc">inp&nbsp;&nbsp;&nbsp;&nbsp; 0.78634 0.693</span><br>
<br>
&quot;gR&quot; コマンドのバーチャル置換モードを使いましょう。これならレイアウトは崩れま<br>
せん:<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="PreProc">inp&nbsp;&nbsp;&nbsp;&nbsp; 0&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 0.534&nbsp;&nbsp; 0.693</span><br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;gR0.786 |<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;V<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="PreProc">inp&nbsp;&nbsp;&nbsp;&nbsp; 0.786&nbsp;&nbsp; 0.534&nbsp;&nbsp; 0.693</span><br>
<br>
<span class="PreProc">==============================================================================</span><br>
<br>
次章:&nbsp;<a class="Identifier" href="usr_26.html">|usr_26.txt|</a>&nbsp;&nbsp;繰り返し<br>
<br>
Copyright: see&nbsp;<a class="Identifier" href="usr_01.html#manual-copyright">|manual-copyright|</a>&nbsp;&nbsp;vim:tw=78:ts=8:ft=help:norl:<br>
</div>
