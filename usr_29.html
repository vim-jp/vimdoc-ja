---
layout: vimdoc
helpname: 'usr_29'
---
<div id='vimCodeElement'>
<a class="Constant" href="usr_29.html" name="usr_29.txt">usr_29.txt</a>&nbsp;&nbsp;&nbsp;&nbsp;For&nbsp;<span class="Identifier">Vim バージョン 9.0.</span>&nbsp;&nbsp;Last change: 2022 Mar 13<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; VIM USER MANUAL - by Bram Moolenaar<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; プログラムの中を移動する<br>
<br>
<br>
Vim の作者はプログラマです。当然、プログラムを書くための機能が Vim にはたくさ<br>
んあります。この章では、識別子が定義された場所、あるいは使われている場所にジャ<br>
ンプしたり、その定義を別のウィンドウでプレビューしたりする方法を説明します。プ<br>
ログラミング関連の機能は次章でも説明します。<br>
<br>
<a class="Identifier" href="usr_29.html#29.1">29.1</a>&nbsp;&nbsp;タグを使う<br>
<a class="Identifier" href="usr_29.html#29.2">29.2</a>&nbsp;&nbsp;プレビューウィンドウ<br>
<a class="Identifier" href="usr_29.html#29.3">29.3</a>&nbsp;&nbsp;プログラムの中を移動する<br>
<a class="Identifier" href="usr_29.html#29.4">29.4</a>&nbsp;&nbsp;グローバル識別子を検索する<br>
<a class="Identifier" href="usr_29.html#29.5">29.5</a>&nbsp;&nbsp;ローカル識別子を検索する<br>
<br>
次章:&nbsp;<a class="Identifier" href="usr_30.html">usr_30.txt</a>&nbsp;&nbsp;プログラムの編集<br>
前章:&nbsp;<a class="Identifier" href="usr_28.html">usr_28.txt</a>&nbsp;&nbsp;折り畳み<br>
目次:&nbsp;<a class="Identifier" href="usr_toc.html">usr_toc.txt</a><br>
<br>
<span class="PreProc">==============================================================================</span><br>
<a class="Constant" href="usr_29.html#29.1" name="29.1">29.1</a>&nbsp;&nbsp;タグを使う<br>
<br>
タグとは、識別子が定義された場所のことです。例えば C や C++ の関数定義がそうで<br>
す。タグの一覧はタグファイルに保存されます。Vim はタグファイルに対応しており、<br>
タグ、つまり識別子の定義場所に直接ジャンプできます。<br>
カレントディレクトリのすべての C ファイルからタグを生成するには、次のコマンド<br>
を使います:<br>
<br>
<div class="helpExample">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ctags *.c</div>
<br>
&quot;ctags&quot; は Vim に付属してません。ほとんどの Unix システムには最初からインス<br>
トールされています。持っていない場合は Universal/Exuberant ctags を使ってくだ<br>
さい:<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="Constant"><a href="http://ctags.io">http://ctags.io</a></span>&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="Constant"><a href="http://ctags.sf.net">http://ctags.sf.net</a></span>&nbsp;<br>
<br>
Exuberant ctags は開発されなくなったので、Universal ctags を推奨します。<br>
<br>
Vim のコマンドラインから次のコマンドを実行すると関数定義にジャンプできます:<br>
<br>
<div class="helpExample">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:tag startlist</div>
<br>
&quot;startlist&quot; 関数が検索されます。他のファイルで定義されていても検索可能です。<br>
<span class="Special">CTRL-]</span>&nbsp;コマンドを使うとカーソルの下の単語をタグとみなしてジャンプできます。こ<br>
れは複雑な C コードの探索を簡単にしてくれます。例えば、&quot;write_block&quot; 関数の中<br>
で &quot;write_line&quot; の呼び出しを見つけたとき、その関数の動作を知りたかったら、<br>
&quot;write_line&quot; にカーソルを合わせて&nbsp;<span class="Special">CTRL-]</span>&nbsp;を押せば、その関数の定義にジャンプで<br>
きます。<br>
&quot;write_line&quot; の中で &quot;write_char&quot; が呼ばれていたら、その関数の動作も調べる必要<br>
があります。&quot;write_char&quot; にカーソルを合わせて&nbsp;<span class="Special">CTRL-]</span>&nbsp;を押しましょう。これ<br>
で &quot;write_char&quot; の定義に移動できました。<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+-------------------------------------+<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|void write_block(char **s; int cnt)&nbsp;&nbsp;|<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|{&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|&nbsp;&nbsp; int i;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|&nbsp;&nbsp; for (i = 0; i &lt; cnt; ++i)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;write_line(s[i]);&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|}&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+-----------|-------------------------+<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="Special">CTRL-]</span>&nbsp;|<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|&nbsp;&nbsp;&nbsp;&nbsp;+----------------------------+<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+--&gt; |void write_line(char *s)&nbsp;&nbsp;&nbsp;&nbsp;|<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |{&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |&nbsp;&nbsp; while (*s != 0)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;write_char(*s++);&nbsp;&nbsp;&nbsp;&nbsp; |<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |}&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; +--------|-------------------+<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="Special">CTRL-]</span>&nbsp;|<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|&nbsp;&nbsp;&nbsp;&nbsp;+------------------------------------+<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+--&gt; |void write_char(char c)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |{&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |&nbsp;&nbsp;&nbsp;&nbsp;putchar((int)(unsigned char)c); |<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |}&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; +------------------------------------+<br>
<br>
&quot;:tags&quot; コマンドで移動経路を確認できます:<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:tags<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="PreProc"># TO tag&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; FROM line&nbsp;&nbsp;in file/text</span><br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="PreProc">1&nbsp;&nbsp;1 write_line&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;8&nbsp;&nbsp;write_block.c</span><br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="PreProc">2&nbsp;&nbsp;1 write_char&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;7&nbsp;&nbsp;write_line.c</span><br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="PreProc">&gt;</span><br>
<br>
では元の場所に戻りましょう。<span class="Special">CTRL-T</span>&nbsp;で直前のタグに戻れます。上の例であれば、<br>
&quot;write_line&quot; 関数の中の &quot;write_char&quot; の呼び出しに戻ることになります。<br>
このコマンドはカウント指定を付けてジャンプする回数を指定できます。前方にジャン<br>
プして、そして戻ってくることができましたね。もう一度前方に移動してみましょう。<br>
次のコマンドでタグリストの前方に移動できます:<br>
<br>
<div class="helpExample">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:tag</div>
<br>
コマンドの前にカウント指定を付けてジャンプする回数を指定できます。例えば<br>
&quot;:3tag&quot; のように使います。<span class="Special">CTRL-T</span>&nbsp;も同様に回数指定できます。<br>
このように、<span class="Special">CTRL-]</span>&nbsp;をで呼び出しをたどり、<span class="Special">CTRL-T</span>&nbsp;でさかのぼることができます。<br>
&quot;:tags&quot; コマンドで現在地を確認できます。<br>
<br>
<br>
<span class="Statement">ウィンドウを分割する</span><br>
<br>
&quot;:tag&quot; コマンドはカレントウィンドウを使ってジャンプ先のファイルを表示します。<br>
しかし現在の関数とジャンプ先の関数を同時に表示したいこともあると思います。<br>
&quot;:split&quot; コマンドでウィンドウを分割してから &quot;:tag&quot; コマンドを使うという方法も<br>
ありますが、専用の短縮コマンドが用意されています:<br>
<br>
<div class="helpExample">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:stag tagname</div>
<br>
カーソルの下の単語にタグジャンプするときにウィンドウを分割したい場合は次のコマ<br>
ンドを使います:<br>
<br>
<div class="helpExample">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;CTRL-W ]</div>
<br>
カウント指定を付けて新しいウィンドウの高さを指定できます。<br>
<br>
<br>
<span class="Statement">複数のタグファイルを使う</span><br>
<br>
ファイルが複数のディレクトリに分れている場合、ディレクトリ毎にタグファイルを作<br>
ることもできますが、その方法だとタグファイルと同じディレクトリのファイルにしか<br>
ジャンプできません。<br>
タグファイルが複数ある場合は&nbsp;<a class="Type" href="options.html#'tags'">'tags'</a>&nbsp;オプションを設定して、関連するすべてのタグ<br>
ファイルが検索されるようにしてください。例:<br>
<br>
<div class="helpExample">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:set tags=./tags,./../tags,./*/tags</div>
<br>
カレントファイルと同じディレクトリ、その一つ上のディレクトリ、すべてのサブディ<br>
レクトリからタグファイルが検索されます。<br>
これでかなり多くのタグファイルが使えるようになりましたが、まだ十分ではないかも<br>
しれません。例えば &quot;~/proj/src&quot; を編集しているときに &quot;~/proj/sub/tags&quot; を見つ<br>
けることができません。そのような場合はディレクトリツリー全体を検索するように設<br>
定します。例:<br>
<br>
<div class="helpExample">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:set tags=~/proj/**/tags</div>
<br>
<br>
<span class="Statement">タグファイルを一つだけ使う</span><br>
<br>
たくさんの場所からタグファイルを検索しているときは、ハードディスクがガリガリと<br>
音を立てるのが聞こえると思います。これは効率が良くありません。そんなときは少し<br>
時間を掛けて一つの巨大なタグファイルを生成するのがベストです。寝ている間にでも<br>
やってしまうといいでしょう。<br>
それには上述した Universal か Exuberant ctags が必要です。このプログラムには<br>
ディレクトリツリー全体を検索するためのオプションがあります:<br>
<br>
<div class="helpExample">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;cd ~/proj<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ctags -R .</div>
<br>
Universal/Exuberant ctags のいいところは、いろんなファイルタイプを認識してくれ<br>
るところです。C や C++ だけでなく Effiel や Vim script も処理できます。詳しく<br>
は ctagsのドキュメントを参照してください。<br>
これで、巨大なタグファイルを一つだけ指定するだけでよくなりました:<br>
<br>
<div class="helpExample">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:set tags=~/proj/tags</div>
<br>
<br>
<span class="Statement">定義の重複</span><br>
<br>
同じ名前の関数が何度も定義されている場合、あるいは複数のクラスで同名のメソッド<br>
が定義されている場合、&quot;:tag&quot; コマンドは最初に見つかったタグにジャンプします。<br>
カレントファイル内にタグがある場合はそれが優先されます。<br>
タグが重複している場合は次のコマンドで別のタグにジャンプできます:<br>
<br>
<div class="helpExample">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:tnext</div>
<br>
もう一度実行するとさらに別のタグにジャンプできます。タグがたくさんある場合は次<br>
のコマンドでタグを選択できます:<br>
<br>
<div class="helpExample">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:tselect tagname</div>
<br>
このような選択画面が表示されます:<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="PreProc"># pri kind tag&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; file</span><br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="PreProc">1 F&nbsp;&nbsp; f&nbsp;&nbsp;&nbsp;&nbsp;mch_init&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;os_amiga.c</span><br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="PreProc">mch_init()</span><br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="PreProc">2 F&nbsp;&nbsp; f&nbsp;&nbsp;&nbsp;&nbsp;mch_init&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;os_mac.c</span><br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="PreProc">mch_init()</span><br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="PreProc">3 F&nbsp;&nbsp; f&nbsp;&nbsp;&nbsp;&nbsp;mch_init&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;os_msdos.c</span><br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="PreProc">mch_init(void)</span><br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="PreProc">4 F&nbsp;&nbsp; f&nbsp;&nbsp;&nbsp;&nbsp;mch_init&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;os_riscos.c</span><br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="PreProc">mch_init()</span><br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="PreProc">Enter nr of choice (&lt;CR&gt; to abort):&nbsp;</span><br>
<br>
(行頭の) 番号を入力してジャンプしたい場所を選択してください。他の列にはタグの<br>
場所を示すヒントが表示されます。<br>
<br>
次のコマンドで他の重複タグに移動できます:<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:tfirst&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 最初のタグに移動<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:<span class="Special">[count]</span>tprevious&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="Special">[count]</span>個 前のタグに移動<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:<span class="Special">[count]</span>tnext&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="Special">[count]</span>個 次のタグに移動<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:tlast&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;最後のタグに移動<br>
<br>
<span class="Special">[count]</span>&nbsp;を省略すると 1 が使われます。<br>
<br>
<br>
<span class="Statement">タグ名の推測</span><br>
<br>
コマンドライン補完を使うと長いタグ名の入力が簡単になります。最初の数文字を入力<br>
してから&nbsp;<span class="Special">&lt;Tab&gt;</span>&nbsp;キーを押してください:<br>
<br>
<div class="helpExample">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:tag write_&lt;Tab&gt;</div>
<br>
最初にマッチしたタグが補完されます。それが意図したタグでない場合は、目的のタグ<br>
が見つかるまで&nbsp;<span class="Special">&lt;Tab&gt;</span>&nbsp;キーを押してください。<br>
関数名の一部しか知らない場合や、同じ文字で始まるタグ (後半だけが違っている) が<br>
たくさんある場合は、パターンを使ってタグを検索できます。<br>
例えば、名前に &quot;block&quot; が含まれているタグにジャンプする場合は、まず次のように<br>
入力します:<br>
<br>
<div class="helpExample">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:tag /block</div>
<br>
そして、コマンドライン補完を使います。<span class="Special">&lt;Tab&gt;</span>&nbsp;キーを押してください。&quot;block&quot; を含<br>
むタグが検索され、最初にマッチしたタグが使われます。<br>
タグ名の前に &quot;/&quot; を付けると、続くタグ名はそのまま使われず、パターンとして解釈<br>
されます。検索パターンと同じ機能がすべて使えます。例えば、&quot;write_&quot; で始まるタ<br>
グを選択したい場合は次のようにします:<br>
<br>
<div class="helpExample">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:tselect /^write_</div>
<br>
最初の &quot;^&quot; はタグ名が &quot;write_&quot; で始まることを示しています。&quot;^&quot; がない場合はタ<br>
グ名の途中にもマッチしてしまいます。同様に、&quot;$&quot; を最後に付けるとタグ名の末尾に<br>
マッチするようになります。<br>
<br>
<br>
<span class="Statement">タグブラウザー</span><br>
<br>
<span class="Special">CTRL-]</span>&nbsp;を使うとカーソルの下にある識別子の定義にジャンプできますが、これを利用<br>
すると、識別子の一覧を目次として使うことができます。例を示します。まず識別子の<br>
一覧を作ります (Universal か Exuberant ctags が必要です)<br>
<br>
<div class="helpExample">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ctags --c-types=f -f functions *.c</div>
<br>
そして Vim をファイル指定なしで起動し、作成したファイルを縦分割ウィンドウで開<br>
きます:<br>
<br>
<div class="helpExample">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;vim<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:vsplit functions</div>
<br>
ウィンドウにはすべての関数の一覧が表示されています。関数以外の名前も含まれてい<br>
るかもしれませんが、それは無視してください。&quot;:setlocal ts=99&quot; を実行して表示を<br>
見やすくします。<br>
このウィンドウで、次のマップを定義します:<br>
<br>
<div class="helpExample">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:nnoremap &lt;buffer&gt; &lt;CR&gt; 0ye&lt;C-W&gt;w:tag &lt;C-R&gt;&quot;&lt;CR&gt;</div>
<br>
表示したい関数の行に移動して&nbsp;<span class="Special">&lt;Enter&gt;</span>&nbsp;を押すと、カーソルが他のウィンドウに移動<br>
して、選択した関数にジャンプします。<br>
<br>
<br>
<span class="Statement">関連項目</span><br>
<br>
タグ名の大文字と小文字を無視する場合には、<a class="Type" href="options.html#'tagcase'">'tagcase'</a>&nbsp;を &quot;ignore&quot; に設定する<br>
か、<a class="Type" href="options.html#'tagcase'">'tagcase'</a>&nbsp;を &quot;followic&quot; のまま変更せず&nbsp;<a class="Type" href="options.html#'ignorecase'">'ignorecase'</a>&nbsp;をオンに設定してくださ<br>
い。<br>
<br>
<a class="Type" href="options.html#'tagbsearch'">'tagbsearch'</a>&nbsp;オプションにはタグファイルがソートされているかどうかを設定しま<br>
す。初期設定ではソート済みに設定されています。これはタグの検索を高速に実行でき<br>
ますが、ソートされていないタグファイルを扱えなくなります。<br>
<br>
<a class="Type" href="options.html#'taglength'">'taglength'</a>&nbsp;オプションはタグの識別に使う文字数を指定するのに使います。<br>
<br>
cscope はフリーのプログラムです。識別子の定義場所を探すだけでなく、それが使わ<br>
れている場所も検索できます。<a class="Identifier" href="if_cscop.html#cscope">cscope</a>&nbsp;参照。<br>
<br>
<span class="PreProc">==============================================================================</span><br>
<a class="Constant" href="usr_29.html#29.2" name="29.2">29.2</a>&nbsp;&nbsp;プレビューウィンドウ<br>
<br>
コードの中で関数を呼び出すときには、その引数を正確に把握する必要があります。引<br>
数の意味は関数の定義を見ればわかります。タグの仕組みを使えば簡単に確認できます<br>
が、できれば別のウィンドウに定義を表示したいところです。それにはプレビューウィ<br>
ンドウを使います。<br>
次のようにすると &quot;write_char&quot; 関数をプレビューウィンドウで表示できます:<br>
<br>
<div class="helpExample">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:ptag write_char</div>
<br>
ウィンドウが開いて &quot;write_char&quot; タグにジャンプします。カーソルの位置は動かない<br>
ので&nbsp;<span class="Special">CTRL-W</span>&nbsp;コマンドを使って戻る必要はありません。<br>
テキストの中に関数名がある場合は、次のコマンドでその定義をプレビューウィンドウ<br>
で表示できます:<br>
<br>
<div class="helpExample">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;CTRL-W }</div>
<br>
カーソルの下にある単語の定義場所を自動的に表示してくれるスクリプトもあります。<br>
<a class="Identifier" href="windows.html#CursorHold-example">CursorHold-example</a>参照。<br>
<br>
プレビューウィンドウを閉じるには次のコマンドを使います:<br>
<br>
<div class="helpExample">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:pclose</div>
<br>
プレビューウィンドウでファイルを開きたい場合は &quot;:pedit&quot; を使います。例えばヘッ<br>
ダーファイルを表示するような場合に便利です:<br>
<br>
<div class="helpExample">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:pedit defs.h</div>
<br>
最後に &quot;:psearch&quot; コマンドを紹介します。カレントファイルおよびインクルードされ<br>
ているファイルから単語を検索して、ヒットした場所をプレビューウィンドウで表示で<br>
きます。これは例えば、ライブラリ関数を使っていて、それ用のタグファイルを作って<br>
いないときに使います。例:<br>
<br>
<div class="helpExample">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:psearch popen</div>
<br>
&quot;stdio.h&quot; がプレビューウィンドウで開き、popen() 関数のプロトタイプが表示されま<br>
す:<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="PreProc">FILE&nbsp;&nbsp;&nbsp;&nbsp;*popen __P((const char *, const char *));</span><br>
<br>
プレビューウィンドウの高さは&nbsp;<a class="Type" href="options.html#'previewheight'">'previewheight'</a>&nbsp;オプションで設定できます (最初に<br>
開いたときに使われる)。<br>
<br>
<span class="PreProc">==============================================================================</span><br>
<a class="Constant" href="usr_29.html#29.3" name="29.3">29.3</a>&nbsp;&nbsp;プログラムの中を移動する<br>
<br>
プログラムには構造があるので、構文を認識することが可能です。その情報を利用して<br>
移動するコマンドが用意されています。<br>
例えば C のプログラムには次のような構文がよく現れます:<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="PreProc">#ifdef USE_POPEN</span><br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="PreProc">fd = popen(&quot;ls&quot;, &quot;r&quot;)</span><br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="PreProc">#else</span><br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="PreProc">fd = fopen(&quot;tmp&quot;, &quot;w&quot;)</span><br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="PreProc">#endif</span><br>
<br>
もっと長いかもしれませんし、入れ子になっていることもあります。&quot;#ifdef&quot; に移動<br>
して % を押すと &quot;#else&quot; にジャンプできます。もう一度 % を押すと &quot;#endif&quot; に<br>
ジャンプします。さらに % を押すと &quot;#ifdef&quot; に戻ります。<br>
構文が入れ子になっている場合は、正しく対応しているものが検索されます。これは<br>
&quot;#endif&quot; の書き忘れがないかどうか確認するのに便利です。<br>
&quot;#if&quot; と &quot;#endif&quot; の間にカーソルがあるとき、次のコマンドで開始位置にジャンプで<br>
きます:<br>
<br>
<div class="helpExample">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[#</div>
<br>
&quot;#if&quot; や &quot;#ifdef&quot; の中にいない場合は警告音が鳴ります。前方の &quot;#else&quot; または<br>
&quot;#endif&quot; に移動するには次のコマンドを使います:<br>
<br>
<div class="helpExample">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;]#</div>
<br>
これらのコマンドは、途中にある &quot;#if&quot; - &quot;#endif&quot; ブロックをスキップします。<br>
例:<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="PreProc">#if defined(HAS_INC_H)</span><br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="PreProc">a = a + inc();</span><br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="PreProc"># ifdef USE_THEME</span><br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="PreProc">a += 3;</span><br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="PreProc"># endif</span><br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="PreProc">set_width(a);</span><br>
<br>
カーソルが最後の行にあるとき、&quot;[#&quot; で最初の行に移動できます。途中の &quot;#ifdef&quot; -<br>
&quot;#endif&quot; ブロックはスキップされます。<br>
<br>
<br>
<span class="Statement">コードブロック内の移動</span><br>
<br>
C のコードブロックは {} で囲まれています。ブロックはかなり大きい場合もありま<br>
す。アウターブロック (最も外側のブロック) の開始位置に移動するには &quot;[[&quot; コマン<br>
ドを使います。&quot;][&quot; でブロックの末尾に移動できます。このコマンドは行頭の &quot;{&quot; と<br>
&quot;}&quot; をブロックの区切りとして認識します。<br>
&quot;[{&quot; コマンドで現在のブロックの開始位置に移動できます。同じレベルの {} ペアは<br>
スキップされます。&quot;]}&quot; で末尾に移動できます。<br>
つまりこのような動作です:<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;function(int a)<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; +-&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if (a)<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; +-&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[[ |&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;for (;;)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; --+<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+-&gt;&nbsp;&nbsp; {&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |&nbsp;&nbsp;&nbsp;&nbsp;[{ |&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; foo(32);&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |&nbsp;&nbsp;&nbsp;&nbsp; --+<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |&nbsp;&nbsp; [{ |&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; if (bar(a))&nbsp;&nbsp;--+&nbsp;&nbsp;&nbsp;&nbsp; | ]}&nbsp;&nbsp;&nbsp;&nbsp;|<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; +--&nbsp;&nbsp;&nbsp;&nbsp; |&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+--&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; break;&nbsp;&nbsp;&nbsp;&nbsp; | ]}&nbsp;&nbsp;|&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;-+&nbsp;&nbsp;&nbsp;&nbsp; |&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; | ][<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; +--&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;foobar(a)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;-+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;-+<br>
<br>
C++ や Java では、最も外側の {} ブロックはクラスです。その次のレベルの {} はメ<br>
ソッドです。クラスの中で &quot;[m&quot; を使うと、前のメソッドの開始位置に移動できます。<br>
&quot;]m&quot; で次のメソッドの開始位置に移動できます。<br>
<br>
&quot;[]&quot; で前の関数の末尾に移動、&quot;]]&quot; で次の関数の開始位置に移動できます。行頭が<br>
&quot;}&quot; で始まる行が関数の末尾として認識されます。<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;int func1(void)<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return 1;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+----------&gt;&nbsp;&nbsp;}<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[]&nbsp;&nbsp;|&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; int func2(void)<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+-&gt;&nbsp;&nbsp;{<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|&nbsp;&nbsp;&nbsp;&nbsp;[[&nbsp;&nbsp;|&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if (flag)<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;start&nbsp;&nbsp;&nbsp;&nbsp; +--&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+--&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return flag;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|&nbsp;&nbsp;&nbsp;&nbsp;][&nbsp;&nbsp;|&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return 2;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+-&gt;&nbsp;&nbsp;}<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;]]&nbsp;&nbsp;|<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; int func3(void)<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+----------&gt;&nbsp;&nbsp;{<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return 3;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br>
<br>
()、{}、[] などの対括弧に移動する場合は &quot;%&quot; も使えることを忘れないでください。<br>
括弧の間に複数の行がはさまっていても機能します。<br>
<br>
<br>
<span class="Statement">カッコ内の移動</span><br>
<br>
&quot;[(&quot; と &quot;])&quot; は &quot;[{&quot; と &quot;]}&quot; と機能は同じです。ただし、{} のペアではなく () の<br>
ペアに対して動作します。<br>
<br>
<div class="helpExample">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[(</div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;--------------------------------<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;-------<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="PreProc">if (a == b &amp;&amp; (c == d || (e &gt; f)) &amp;&amp; x &gt; y)</span><br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;--------------&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;--------------------------------&gt;<br>
<div class="helpExample">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ])</div>
<br>
<span class="Statement">コメント内の移動</span><br>
<br>
コメントの開始位置に戻るには &quot;[/&quot; コマンドを使います。コメントの終了位置に移動<br>
するには &quot;]/&quot; を使います。これは /* - */ 形式のコメントのみ対応しています。<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+-&gt;&nbsp;&nbsp;&nbsp;&nbsp; +-&gt; /*<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|&nbsp;&nbsp;&nbsp;&nbsp;[/ |&nbsp;&nbsp;&nbsp;&nbsp;* A comment about&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;--+<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; [/ |&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; +--&nbsp;&nbsp;* wonderful life.&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| ]/<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;-+<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+--&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;foo = bar * 3;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; --+<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| ]/<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; /* a short comment */&nbsp;&nbsp;&lt;-+<br>
<br>
<span class="PreProc">==============================================================================</span><br>
<a class="Constant" href="usr_29.html#29.4" name="29.4">29.4</a>&nbsp;&nbsp;グローバル識別子を検索する<br>
<br>
C プログラムを編集していて、変数の型が &quot;int&quot; なのか &quot;unsigned&quot; なのか分からな<br>
かったら、&quot;[I&quot; コマンドで簡単に確認できます。<br>
例えば、&quot;column&quot; という単語の上でコマンドを実行すると:<br>
<br>
<div class="helpExample">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[I</div>
<br>
マッチした行が一覧表示されます。カレントファイルとインクルードファイル (さらに<br>
その中でインクルードされているファイル) が検索されます。検索結果は次のように表<br>
示されます:<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="PreProc">structs.h</span><br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="PreProc">1:&nbsp;&nbsp; 29&nbsp;&nbsp;&nbsp;&nbsp; unsigned&nbsp;&nbsp;&nbsp;&nbsp; column;&nbsp;&nbsp;&nbsp;&nbsp;/* column number */</span><br>
<br>
インクルードファイルも検索されるという点が、タグやプレビューウィンドウを使った<br>
検索よりも便利です。たいていは正しい定義場所が見つかります。タグファイルが更新<br>
されていなくても、インクルードファイル用のタグファイルがなくても機能します。<br>
ただし、&quot;[I&quot; が動作するためには少し条件があります。ファイルのインクルードを認<br>
識するために、<a class="Type" href="options.html#'include'">'include'</a>&nbsp;オプションが正しく設定されていなければなりません。初期<br>
設定は C と C++ 用に設定されているので、他の言語では設定を変更する必要がありま<br>
す。<br>
<br>
<br>
<span class="Statement">インクルードファイルの場所</span><br>
<br>
インクルードファイルは&nbsp;<a class="Type" href="options.html#'path'">'path'</a>&nbsp;オプションに設定された場所から検索されます。設定<br>
に含まれていないディレクトリがあると、いくつかのインクルードファイルは検出でき<br>
ないかもしれません。次のコマンドで検出できないファイルを確認できます:<br>
<br>
<div class="helpExample">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:checkpath</div>
<br>
検出できなかったインクルードファイルの一覧が表示されます。インクルードファイル<br>
の中のインクルードも検査されます。次のような結果が表示されます:<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="PreProc">--- Included files not found in path ---</span><br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="PreProc">&lt;io.h&gt;</span><br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="PreProc">vim.h --&gt;</span><br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="PreProc">&lt;functions.h&gt;</span><br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="PreProc">&lt;clib/exec_protos.h&gt;</span><br>
<br>
カレントファイルでインクルードしている &quot;io.h&quot; が見つかっていません。&quot;vim.h&quot; は<br>
見つかったので &quot;:checkpath&quot; はさらにそのファイルのインクルードも検査しました。<br>
そして、&quot;functions.h&quot; と &quot;clib/exec_protos.h&quot; が見つかりませんでした。<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="Todo">Note</span>:<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Vim はコンパイラではないので、&quot;#ifdef&quot; ステートメントを認識しません。<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;つまり、&quot;#if NEVER&quot; で囲まれている &quot;#include&quot; ステートメントもすべて検<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;査されます。<br>
<br>
この問題を修正するには&nbsp;<a class="Type" href="options.html#'path'">'path'</a>&nbsp;オプションにディレクトリを追加します。Makefileを<br>
見れば必要なディレクトリがわかると思います。&quot;-I/usr/local/X11&quot; のように、&quot;-I&quot;<br>
が使われている行を調べてください。次のコマンドでディレクトリを追加できます:<br>
<br>
<div class="helpExample">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:set path+=/usr/local/X11</div>
<br>
サブディレクトリがたくさんある場合はワイルドカード &quot;*&quot; が使えます。例:<br>
<br>
<div class="helpExample">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:set path+=/usr/*/include</div>
<br>
これで &quot;/usr/local/include/&quot; や &quot;/usr/X11/include/&quot; などが検索対象になります。<br>
<br>
ディレクトリツリーのあちこちにインクルードファイルがあるようなプロジェクトでは<br>
&quot;**&quot; が便利です。すべてのサブディレクトリを検索できます。例:<br>
<br>
<div class="helpExample">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:set path+=/projects/invent/**/include</div>
<br>
例えば次のようなディレクトリからファイルが検索されます:<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="PreProc">/projects/invent/include</span><br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="PreProc">/projects/invent/main/include</span><br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="PreProc">/projects/invent/main/os/include</span><br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;etc.<br>
<br>
設定方法は他にもあります。<a class="Type" href="options.html#'path'">'path'</a>&nbsp;オプションの説明を確認してください。<br>
実際に検出されたインクルードファイルを確認したい場合は次のコマンドを使います:<br>
<br>
<div class="helpExample">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:checkpath!</div>
<br>
インクルードされているファイルの (長大な) 一覧が表示されます。出力を短くするた<br>
め、同じファイルを見つけた場合は &quot;(Already listed)&quot; とだけ表示し、その中のイン<br>
クルードファイルは表示しません。<br>
<br>
<br>
<span class="Statement">定義場所にジャンプする</span><br>
<br>
&quot;[I&quot; はマッチした行だけを一覧表示します。その周辺を見たい場合は、次のコマンド<br>
で最初のマッチにジャンプします:<br>
<br>
<div class="helpExample">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[&lt;Tab&gt;</div>
<br>
<span class="Special">&lt;Tab&gt;</span>&nbsp;と&nbsp;<span class="Special">CTRL-I</span>&nbsp;は同じなので &quot;[&nbsp;<span class="Special">CTRL-I</span>&quot; でも構いません。<br>
<br>
&quot;[I&quot; で表示される一覧には番号が付いています。最初の項目以外の場所にジャンプし<br>
てい場合は番号を指定してください:<br>
<br>
<div class="helpExample">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;3[&lt;Tab&gt;</div>
<br>
三番目のマッチにジャンプします。<span class="Special">CTRL-O</span>&nbsp;で元の場所に戻れることをお忘れなく。<br>
<br>
<br>
<span class="Statement">関連コマンド</span><br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[i&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;最初のマッチだけ表示<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;]I&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;カーソルより後ろのマッチを一覧表示<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;]i&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;カーソルより後ろの最初のマッチだけ表示<br>
<br>
<br>
<span class="Statement">定義済識別子の検索</span><br>
<br>
&quot;[I&quot; コマンドはすべての識別子を検索します。&quot;#define&quot; で定義されたマクロだけを<br>
検索するには次のコマンドを使います:<br>
<br>
<div class="helpExample">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[D</div>
<br>
このコマンドもインクルードファイルが検索対象になります。検索される行の書式は<br>
<a class="Type" href="options.html#'define'">'define'</a>&nbsp;オプションで指定します。C と C++ 以外の言語では設定を変更する必要があ<br>
ります。<br>
次のような &quot;[D&quot; に関連したコマンドがあります:<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[d&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;最初のマッチだけ表示<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;]D&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;カーソルより後ろのマッチを一覧表示<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;]d&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;カーソルより後ろの最初のマッチだけ表示<br>
<br>
<span class="PreProc">==============================================================================</span><br>
<a class="Constant" href="usr_29.html#29.5" name="29.5">29.5</a>&nbsp;&nbsp;ローカル識別子を検索する<br>
<br>
&quot;[I&quot; コマンドはインクルードファイルの中も検索します。カーソルの下の単語が最初<br>
に現れる場所を、カレントファイルの中だけ検索し、その場所にジャンプするには、次<br>
のコマンドを使います:<br>
<br>
<div class="helpExample">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;gD</div>
<br>
ヒント: Goto Definition (定義に移動)。このコマンドはローカル(C 用語で &quot;static&quot;)<br>
に定義された変数や関数を検索するのに便利です。例 (カーソルは &quot;counter&quot; の上):<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; +-&gt;&nbsp;&nbsp; static int counter = 0;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |&nbsp;&nbsp;&nbsp;&nbsp; int get_counter(void)<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;gD |&nbsp;&nbsp;&nbsp;&nbsp; {<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ++counter;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; +--&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; return counter;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }<br>
<br>
さらに検索範囲を狭めて、現在の関数の中だけ検索したい場合は次のコマンドを使いま<br>
す:<br>
<br>
<div class="helpExample">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;gd</div>
<br>
現在の関数の開始位置から最初に単語が使われている場所が検索されます。実際に、行<br>
頭が &quot;{&quot; で始まる行を後方検索して、その上の空行まで戻り、そこから識別子を前方<br>
検索しています。例 (カーソルは &quot;idx&quot; の上):<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;int find_entry(char *name)<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; +-&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;int idx;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;gd |&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;for (idx = 0; idx &lt; table_len; ++idx)<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if (strcmp(table[idx].name, name) == 0)<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; +--&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return idx;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br>
<br>
<span class="PreProc">==============================================================================</span><br>
<br>
次章:&nbsp;<a class="Identifier" href="usr_30.html">usr_30.txt</a>&nbsp;&nbsp;プログラムの編集<br>
<br>
Copyright: see&nbsp;<a class="Identifier" href="usr_01.html#manual-copyright">manual-copyright</a>&nbsp;&nbsp;vim:tw=78:ts=8:noet:ft=help:norl:<br>
</div>
