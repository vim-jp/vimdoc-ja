---
layout: vimdoc
helpname: 'usr_31'
---
<div id='vimCodeElement'>
<a class="Constant" href="usr_31.html" name="usr_31.txt">usr_31.txt</a>&nbsp;&nbsp;&nbsp;&nbsp;For&nbsp;<span class="Identifier">Vim バージョン 9.0.</span>&nbsp;&nbsp;Last change: 2020 Jul 28<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; VIM USER MANUAL - by Bram Moolenaar<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;GUI を活用する<br>
<br>
<br>
Vim は端末でも動作しますが、GUI 版の Vim にはさらに追加機能があります。ファイ<br>
ルブラウザーを使ってファイルを選択したり、操作を確認するためのダイアログを表示<br>
したり、キーボードショートカットを使ってメニューにアクセスしたりできます。<br>
<br>
<a class="Identifier" href="usr_31.html#31.1">31.1</a>&nbsp;&nbsp;ファイルブラウザー<br>
<a class="Identifier" href="usr_31.html#31.2">31.2</a>&nbsp;&nbsp;操作確認<br>
<a class="Identifier" href="usr_31.html#31.3">31.3</a>&nbsp;&nbsp;メニューのショートカット<br>
<a class="Identifier" href="usr_31.html#31.4">31.4</a>&nbsp;&nbsp;Vim ウィンドウの位置とサイズ<br>
<a class="Identifier" href="usr_31.html#31.5">31.5</a>&nbsp;&nbsp;その他<br>
<br>
次章:&nbsp;<a class="Identifier" href="usr_32.html">usr_32.txt</a>&nbsp;&nbsp;undo ツリー<br>
前章:&nbsp;<a class="Identifier" href="usr_30.html">usr_30.txt</a>&nbsp;&nbsp;プログラムの編集<br>
目次:&nbsp;<a class="Identifier" href="usr_toc.html">usr_toc.txt</a><br>
<br>
<span class="PreProc">==============================================================================</span><br>
<a class="Constant" href="usr_31.html#31.1" name="31.1">31.1</a>&nbsp;&nbsp;ファイルブラウザー<br>
<br>
[ファイル]/[開く...] メニューを実行するとファイルブラウザーが表示されます。ファ<br>
イルブラウザーを使えば簡単にファイルを探すことができます。しかし例えば、[ウィ<br>
ンドウを分割して開く] などのメニューは用意されていません。[ウィンドウ]/[分割]<br>
を実行してから [ファイル]/[開く...] を実行することもできますが、面倒ですよね。<br>
他のコマンドと同様、ファイルブラウザーもコマンド入力で開くことができます。例え<br>
ば、split コマンドに &quot;browse&quot; を付けることで、ファイルブラウザーを使うことがで<br>
きます:<br>
<br>
<div class="helpExample">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:browse split</div>
<br>
選択したファイルが &quot;:split&quot; コマンドで開かれます。キャンセルボタンを押した場合<br>
は何も実行されず、ウィンドウも分割されません。引数にファイルを指定すると、ファ<br>
イルブラウザーの初期ディレクトリとして使われます。例:<br>
<br>
<div class="helpExample">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:browse split /etc</div>
<br>
&quot;/etc&quot; ディレクトリでファイルブラウザーが開きます。<br>
<br>
&quot;:browse&quot; コマンドはファイルを開くためのコマンドと組み合わせて使います。<br>
ディレクトリを指定しなかった場合は、適切なディレクトリが選択されます。初期設定<br>
では、最後に使ったディレクトリが使われます。例えば、&quot;:browse split&quot; で<br>
&quot;/usr/local/share&quot; のファイルを開いた場合、次に &quot;:browse&quot; を使ったときは<br>
&quot;/usr/local/share&quot; が使われます。<br>
この動作は&nbsp;<a class="Type" href="options.html#'browsedir'">'browsedir'</a>&nbsp;オプションで変更できます。次の値を設定できます:<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;last&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;最後に使ったディレクトリ (初期設定)<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;buffer&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;カレントバッファと同じディレクトリ<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;current&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; カレントディレクトリ<br>
<br>
例えば、カレントディレクトリが &quot;/usr&quot; で、&quot;/usr/local/share/readme&quot; を開いてい<br>
るとき、次のコマンドを実行すると:<br>
<br>
<div class="helpExample">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:set browsedir=buffer<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:browse edit</div>
<br>
&quot;/usr/local/share&quot; でブラウザーが開きます。次のように設定すると:<br>
<br>
<div class="helpExample">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:set browsedir=current<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:browse edit</div>
<br>
&quot;/usr&quot; で開きます。<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="Todo">Note</span>:<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;大抵のファイルブラウザーではキーボードが使えるので、マウスを使わなくて<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;も操作できます。操作方法はシステム依存なのでここでは説明しません。Vim<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;は (可能な限り) 標準のブラウザーを使用します。システムのドキュメントに<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;キーボードショートカットの説明が載っているはずです。<br>
<br>
GUI を使っていない場合でも、ファイルエクスプローラーを使えばファイルブラウザー<br>
と同じようにファイルを選択できます。ただし、&quot;:browse&quot; コマンドは使えません。<br>
<a class="Identifier" href="pi_netrw.html#netrw-browse">netrw-browse</a>&nbsp;参照。<br>
<br>
<span class="PreProc">==============================================================================</span><br>
<a class="Constant" href="usr_31.html#31.2" name="31.2">31.2</a>&nbsp;&nbsp;操作確認<br>
<br>
ファイルが上書きされたり変更が失われたりするような操作は、間違って実行してしま<br>
わないように保護されています。何かがマズいことになりそうなときは「本当にその操<br>
作を実行したい場合は ! を付けてください」というようなエラーメッセージが表示さ<br>
れます。<br>
同じコマンドを再度入力したくない場合は、ダイアログを使うと便利です。&quot;OK&quot; か<br>
&quot;Cancel&quot; を選ぶだけで動作を指示できます。<br>
例えば、ファイルを開いて変更を加えてから、次のコマンドで別のファイルを開きま<br>
す:<br>
<br>
<div class="helpExample">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:confirm edit foo.txt</div>
<br>
すると、次のようなダイアログが表示されます:<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+-----------------------------------+<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|&nbsp;&nbsp; ?&nbsp;&nbsp; Save changes to &quot;bar.txt&quot;?&nbsp;&nbsp;|<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|&nbsp;&nbsp; YES&nbsp;&nbsp; NO&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; CANCEL&nbsp;&nbsp;&nbsp;&nbsp; |<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+-----------------------------------+<br>
<br>
ファイルを保存したい場合は &quot;YES&quot; を選択します。変更を破棄したい場合は &quot;NO&quot; を<br>
選択します。戻って状態を確認したい場合は &quot;CANCEL&quot; を選択します。&quot;CANCEL&quot; を選<br>
択すると元のファイルに戻れます。変更は失われません。<br>
<br>
&quot;:browse&quot; と同様、&quot;:confirm&quot; もファイルを開くためのコマンドと組み合わせること<br>
ができます。同時に使うこともできます:<br>
<br>
<div class="helpExample">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:confirm browse edit</div>
<br>
カレントバッファが未保存ならダイアログが表示されます。そして、ファイルブラウ<br>
ザーが表示され、ファイルを選択できます。<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="Todo">Note</span>:<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ダイアログはキーボードで操作できます。一般的には、<span class="Special">&lt;TAB&gt;</span>&nbsp;キーと矢印キー<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;で選択を変更し、<span class="Special">&lt;Enter&gt;</span>&nbsp;で決定します。操作方法はシステムにより異なりま<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;す。<br>
<br>
&quot;:conform&quot; コマンドは CUI 版の Vim でも使えます。ダイアログの代わりに Vim ウィ<br>
ンドウの下部にメッセージが表示されるので、キーを押して操作を選択してください。<br>
<br>
<div class="helpExample">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:confirm edit main.c</div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="PreProc">Save changes to &quot;Untitled&quot;?</span><br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="PreProc">[Y]es, (N)o, (C)ancel:&nbsp;</span><br>
<br>
どれか一つのキーを押すと選択できます。コマンドラインでの入力とは違い、<span class="Special">&lt;Enter&gt;</span><br>
を押す必要はありません。<br>
<br>
<span class="PreProc">==============================================================================</span><br>
<a class="Constant" href="usr_31.html#31.3" name="31.3">31.3</a>&nbsp;&nbsp;メニューのショートカット<br>
<br>
キーボードを使えばすべてのコマンドを実行できます。メニューは (複雑な) コマンド<br>
を簡単に使うための手段を提供しますが、キーボードから手を離してマウスを使わなけ<br>
ればなりません。<br>
メニューはキーボードでも選択できます。キーボードが使えるかどうかはシステム依存<br>
ですが、大抵は大丈夫です。メニューを選択するには、メニューの下線付きの文字と<br>
<span class="Special">&lt;Alt&gt;</span>&nbsp;キーを組み合わせて使います。例えば、<span class="Special">&lt;A-w&gt;</span>&nbsp;(<span class="Special">&lt;Alt&gt;</span>とw) で [ウィンドウ] メ<br>
ニューが表示されます。<br>
[ウィンドウ] メニューの &quot;分割(p)&quot; アイテムは p に下線が付いているので、<span class="Special">&lt;Alt&gt;</span><br>
キーを押したまま p を押せば選択できます。<br>
<br>
<span class="Special">&lt;Alt&gt;</span>&nbsp;キーでメニューを表示した後は、カーソルキーを使ってメニューを選択できま<br>
す。サブメニューは&nbsp;<span class="Special">&lt;Right&gt;</span>&nbsp;で開いて&nbsp;<span class="Special">&lt;Left&gt;</span>&nbsp;で閉じることができます。閉じるのは<br>
<span class="Special">&lt;Esc&gt;</span>&nbsp;でも可能です。<span class="Special">&lt;Enter&gt;</span>&nbsp;でメニューを実行します。<br>
<br>
<span class="Special">&lt;Alt&gt;</span>&nbsp;キーはメニュー選択とキーマップの両方で使われるので操作が衝突します。<br>
<span class="Special">&lt;Alt&gt;</span>&nbsp;キーの動作は&nbsp;<a class="Type" href="options.html#'winaltkeys'">'winaltkeys'</a>&nbsp;オプションで設定できます。<br>
初期設定は &quot;menu&quot; です。メニューのショートカットと同じキーはマップできません<br>
が、他のキーはマップすることができます。<br>
設定を &quot;no&quot; にすると、<span class="Special">&lt;Alt&gt;</span>&nbsp;キーを使ってメニューを選択できなくなります。メ<br>
ニューを選択するにはマウスを使う必要がありますが、すべての&nbsp;<span class="Special">&lt;Alt&gt;</span>&nbsp;キーをマップ<br>
できます。<br>
設定を &quot;yes&quot; にすると、<span class="Special">&lt;Alt&gt;</span>&nbsp;キーはメニューのために使われます。いくつかの<br>
<span class="Special">&lt;Alt&gt;</span>&nbsp;キー操作はメニュー選択以外の動作になることもあります。<br>
<br>
<span class="PreProc">==============================================================================</span><br>
<a class="Constant" href="usr_31.html#31.4" name="31.4">31.4</a>&nbsp;&nbsp;Vim ウィンドウの位置とサイズ<br>
<br>
次のコマンドでスクリーン上の Vim ウィンドウの位置を確認できます:<br>
<br>
<div class="helpExample">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:winpos</div>
<br>
このコマンドは GUI でのみ機能します。次のような出力が表示されます:<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="PreProc">Window position: X 272, Y 103</span><br>
<br>
位置は画面のピクセル単位です。数値を指定して Vim ウィンドウを移動することもで<br>
きます。例えば、左に 100 ピクセル移動するには次のようにします:<br>
<br>
<div class="helpExample">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:winpos 172 103</div>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="Todo">Note</span>:<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;指定した位置と実際に移動した位置が少しずれることがあります。これはウィ<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ンドウの枠があるからです。ウィンドウマネージャーがずれを引き起こします。<br>
<br>
このコマンドを起動スクリプトに書けば好きな位置でウィンドウを開くことができま<br>
す。<br>
<br>
Vim ウィンドウのサイズは文字数で計算されるので、実際の幅はフォントの大きさに依<br>
存します。次のコマンドで現在のサイズを確認できます:<br>
<br>
<div class="helpExample">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:set lines columns</div>
<br>
サイズを変更するには&nbsp;<a class="Type" href="options.html#'lines'">'lines'</a>&nbsp;と&nbsp;<a class="Type" href="options.html#'columns'">'columns'</a>&nbsp;を設定します:<br>
<br>
<div class="helpExample">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:set lines=50<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:set columns=80</div>
<br>
CUI 端末でもサイズを取得することができますが、ほとんどの端末ではサイズを変更で<br>
きません。<br>
<br>
X-Windows 版の gvim では、ウィンドウの位置とサイズを起動引数で指定できます:<br>
<br>
<div class="helpExample">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;gvim -geometry {width}x{height}+{x-offset}+{y-offset}</div>
<br>
<span class="Special">{width}</span>&nbsp;と&nbsp;<span class="Special">{height}</span>&nbsp;は文字数です。<span class="Special">{x-offset}</span>&nbsp;と&nbsp;<span class="Special">{y-offset}</span>&nbsp;はピクセル数です。<br>
例:<br>
<br>
<div class="helpExample">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;gvim -geometry 80x25+100+300</div>
<br>
<span class="PreProc">==============================================================================</span><br>
<a class="Constant" href="usr_31.html#31.5" name="31.5">31.5</a>&nbsp;&nbsp;その他<br>
<br>
gvim はメールの編集にも使えます。そのためには、メーラーを設定して、gvim をエ<br>
ディタとして選択する必要があります。しかしそれだけではうまくいきません。gvim<br>
がまだ実行中にもかかわらず、メーラーは、gvim が編集を終えたものと判断してしま<br>
います。<br>
gvim が起動するとき、gvim はシェルから分離されます。これは、端末から gvim を起<br>
動したときに、gvim と端末を平行して使うことができるので便利です。gvim が終了す<br>
るまで待機させたい場合は分離をしないようにする必要があります。それには &quot;-f&quot; 引<br>
数を使います:<br>
<br>
<div class="helpExample">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;gvim -f file.txt</div>
<br>
&quot;-f&quot; は &quot;foreground&quot; (操作中) の意味です。Vim を終了するまでシェルがブロックさ<br>
れます。<br>
<br>
<br>
<span class="Statement">GUI の遅延スタート</span><br>
<br>
Unix では gvim を vim として起動することができます。これはシェルの中だけで作業<br>
を完結したい場合に便利です。ファイルの編集中に GUI を使いたくなったら、次のコ<br>
マンドで GUI を開始できます:<br>
<br>
<div class="helpExample">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:gui</div>
<br>
GUI ウィンドウが開いて端末が開放されるので、同じ端末で他の作業を開始できます。<br>
&quot;-f&quot; 引数を指定するとフォアグラウンドで GUI を開始できます。&quot;:gui -f&quot; のように<br>
指定します。<br>
<br>
<br>
<span class="Statement">gVim の起動ファイル</span><br>
<br>
gVim を起動すると、gvimrc ファイルが読み込まれます。これは Vim を起動したとき<br>
に使われる vimrc ファイルのようなものです。gvimrc には、GUI を開始したときだけ<br>
使いたい設定やコマンドを記述します。例えば、<a class="Type" href="options.html#'lines'">'lines'</a>&nbsp;オプションを設定してウィン<br>
ドウのサイズを変更できます:<br>
<br>
<div class="helpExample">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:set lines=55</div>
<br>
端末ではウィンドウサイズは固定なのでこの設定は必要ありません (サイズの変更をサ<br>
ポートしている xterm もありますが)。<br>
gvimrc は vimrc と同じ場所から検索されます。通常、Unix では &quot;~/.gvimrc&quot;、<br>
MS-Windows では &quot;$VIM/_gvimrc&quot; が使われます。<br>
$MYGVIMRC 環境変数に、読み込まれたファイルの名前が設定されるので、次のコマンド<br>
でそのファイルを開くことができます (ファイルが存在するなら):<br>
<br>
<div class="helpExample">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:edit $MYGVIMRC</div>
<br>
何らかの理由で通常の gvimrc を使いたくない場合は、&quot;-U&quot; 引数で他のファイルを指<br>
定できます:<br>
<br>
<div class="helpExample">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;gvim -U thisrc ...</div>
<br>
いつもと違う設定で gvim を起動できます。例えばフォントのサイズを変更するなど。<br>
gvimrc を読み込みたくない場合は次のようにします:<br>
<br>
<div class="helpExample">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;gvim -U NONE ...</div>
<br>
<span class="PreProc">==============================================================================</span><br>
<br>
次章:&nbsp;<a class="Identifier" href="usr_32.html">usr_32.txt</a>&nbsp;&nbsp;undo ツリー<br>
<br>
Copyright: see&nbsp;<a class="Identifier" href="usr_01.html#manual-copyright">manual-copyright</a>&nbsp;&nbsp;vim:tw=78:ts=8:noet:ft=help:norl:<br>
</div>
