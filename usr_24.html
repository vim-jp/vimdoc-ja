---
layout: vimdoc
helpname: 'usr_24'
---
<div id='vimCodeElement'>
<a class="Constant" href="usr_24.html" name="usr_24.txt">usr_24.txt</a>&nbsp;&nbsp;&nbsp;&nbsp;For&nbsp;<span class="Identifier">Vim バージョン 9.0.</span>&nbsp;&nbsp;Last change: 2018 Mar 18<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; VIM USER MANUAL - by Bram Moolenaar<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;素早く入力する<br>
<br>
<br>
テキストを入力するときに、キーストロークを減らしたり入力ミスを防いだりする方法<br>
がいくつかあります。補完機能を使えば以前に入力した単語を繰り返し入力できます。<br>
長い単語を短縮形で入力することもできます。キーボードに無い文字を入力する方法も<br>
あります。<br>
<br>
<a class="Identifier" href="usr_24.html#24.1">24.1</a>&nbsp;&nbsp;修正する<br>
<a class="Identifier" href="usr_24.html#24.2">24.2</a>&nbsp;&nbsp;対応する括弧を表示する<br>
<a class="Identifier" href="usr_24.html#24.3">24.3</a>&nbsp;&nbsp;補完<br>
<a class="Identifier" href="usr_24.html#24.4">24.4</a>&nbsp;&nbsp;挿入を繰り返す<br>
<a class="Identifier" href="usr_24.html#24.5">24.5</a>&nbsp;&nbsp;隣の行からコピーする<br>
<a class="Identifier" href="usr_24.html#24.6">24.6</a>&nbsp;&nbsp;レジスタを挿入する<br>
<a class="Identifier" href="usr_24.html#24.7">24.7</a>&nbsp;&nbsp;短縮形<br>
<a class="Identifier" href="usr_24.html#24.8">24.8</a>&nbsp;&nbsp;特殊な文字を入力する<br>
<a class="Identifier" href="usr_24.html#24.9">24.9</a>&nbsp;&nbsp;ダイグラフ (Digraph)<br>
<a class="Identifier" href="usr_24.html#24.10">24.10</a>&nbsp;ノーマルモードコマンド<br>
<br>
次章:&nbsp;<a class="Identifier" href="usr_25.html">usr_25.txt</a>&nbsp;&nbsp;テキストの整形<br>
前章:&nbsp;<a class="Identifier" href="usr_23.html">usr_23.txt</a>&nbsp;&nbsp;特殊なファイルを編集する<br>
目次:&nbsp;<a class="Identifier" href="usr_toc.html">usr_toc.txt</a><br>
<br>
<span class="PreProc">==============================================================================</span><br>
<a class="Constant" href="usr_24.html#24.1" name="24.1">24.1</a>&nbsp;&nbsp;修正する<br>
<br>
<span class="Special">&lt;BS&gt;</span>&nbsp;キーは既に説明しましたね。<span class="Special">&lt;BS&gt;</span>&nbsp;はカーソル直前の文字を削除します。<span class="Special">&lt;Del&gt;</span><br>
キーはカーソルの下(後)の文字を削除します。<br>
直前の単語をまるごと削除したい場合は&nbsp;<span class="Special">CTRL-W</span>&nbsp;を使います:<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="PreProc">The horse had fallen to the sky</span><br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="Special">CTRL-W</span><br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="PreProc">The horse had fallen to the</span><br>
<br>
行全体を削除して行頭から入力しなおしたい場合は&nbsp;<span class="Special">CTRL-U</span>&nbsp;を使います。カーソルより<br>
後ろの文字とインデントは削除されません。最初の非空白文字からカーソルまでのテキ<br>
ストだけが削除されます。例えば、カーソルが &quot;fallen&quot; の &quot;f&quot; にある場合、<span class="Special">CTRL-U</span><br>
を押すと次のようになります:<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="PreProc">The horse had fallen to the</span><br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="Special">CTRL-U</span><br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="PreProc">fallen to the</span><br>
<br>
何個か前の単語だけを修正したい場合はカーソルを動かす必要があります。例えば、次<br>
のように入力してから:<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="PreProc">The horse had follen to the ground</span><br>
<br>
途中にある &quot;follen&quot; を &quot;fallen&quot; に修正してみます。カーソルが末尾にある場合、次<br>
のように入力すれば修正できます:<br>
<br>
<div class="helpExample">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;Esc&gt;4blraA</div>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 挿入モードを抜ける&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="Special">&lt;Esc&gt;</span><br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;4 単語戻る&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 4b<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;最初の &quot;o&quot; に移動する&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;l<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot;a&quot; に置換する&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ra<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;行末に移動して挿入モードを再開&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;A<br>
<br>
他の方法もあります:<br>
<br>
<div class="helpExample">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;C-Left&gt;&lt;C-Left&gt;&lt;C-Left&gt;&lt;C-Left&gt;&lt;Right&gt;&lt;Del&gt;a&lt;End&gt;</div>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 4 単語戻る。&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="Special">&lt;C-Left&gt;&lt;C-Left&gt;&lt;C-Left&gt;&lt;C-Left&gt;</span><br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;最初の &quot;o&quot; に移動する&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="Special">&lt;Right&gt;</span><br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot;o&quot; を削除する&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="Special">&lt;Del&gt;</span><br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot;a&quot; を挿入する&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;a<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;行末に移動する&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="Special">&lt;End&gt;</span><br>
<br>
挿入モードの中で特殊キーを使って移動しています。これは普通のモードレスエディタ<br>
の操作と似ています。操作方法は覚えやすいかもしれませんが少し面倒です (カーソル<br>
キーを押すには手をホームポジションから離さなければならないし、<span class="Special">&lt;End&gt;</span>&nbsp;キーを押す<br>
にはキーボードに視線を移さなければならない)。<br>
特殊キーは挿入モードの中で使えるのでマップを書くときに重宝します。マップの中で<br>
使う分には入力が面倒になることもありません。<br>
挿入モードでは次の特殊キーが使えます:<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="Special">&lt;C-Home&gt;</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ファイルの先頭に移動<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="Special">&lt;PageUp&gt;</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;1 画面分、逆スクロール<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="Special">&lt;Home&gt;</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;行頭へ移動<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="Special">&lt;S-Left&gt;</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;1 単語左へ移動<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="Special">&lt;C-Left&gt;</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;1 単語左へ移動<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="Special">&lt;S-Right&gt;</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 1 単語右へ移動<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="Special">&lt;C-Right&gt;</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 1 単語右へ移動<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="Special">&lt;End&gt;</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 行末へ移動<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="Special">&lt;PageDown&gt;</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;1 画面分、スクロール<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="Special">&lt;C-End&gt;</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ファイルの末尾に移動<br>
<br>
使えるキーは他にもあります。<a class="Identifier" href="insert.html#ins-special-special">ins-special-special</a>&nbsp;参照。<br>
<br>
<span class="PreProc">==============================================================================</span><br>
<a class="Constant" href="usr_24.html#24.2" name="24.2">24.2</a>&nbsp;&nbsp;対応する括弧を表示する<br>
<br>
&quot;)&quot; を入力したときに、対応する &quot;(&quot; の場所を確認できたら便利ですよね。次のコマ<br>
ンドでそのように設定できます:<br>
<br>
<div class="helpExample">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:set showmatch</div>
<br>
例えば &quot;(example)&quot; と入力したとき、&quot;)&quot; を入力した瞬間に、対応する括弧にカーソ<br>
ルが移動します。カーソルは 0.5 秒くらいその場所に留まり、再び元の場所に帰って<br>
きます。<br>
対応する括弧が見つからなかった場合はビープ音が鳴ります。そのときは、( を入力し<br>
忘れてないか、) を入力し過ぎてないか、確認しましょう。<br>
この機能は、[] や {} の組み合わせにも対応しています。カーソルが移動していると<br>
きに、戻ってくるまで次の入力を待つ必要はありません。次の文字を入力した瞬間に<br>
カーソルは元に戻るので、すぐに入力を再開できます。<br>
カーソルが移動先で待機する時間は&nbsp;<a class="Type" href="options.html#'matchtime'">'matchtime'</a>&nbsp;オプションで設定できます。例えば、<br>
1.5 秒待機するには次のように設定します:<br>
<br>
<div class="helpExample">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:set matchtime=15</div>
<br>
時間は 1/10 秒単位で指定してください。<br>
<br>
<span class="PreProc">==============================================================================</span><br>
<a class="Constant" href="usr_24.html#24.3" name="24.3">24.3</a>&nbsp;&nbsp;補完<br>
<br>
テキストの中から単語を検索して補完することができます。単語の出だしを入力して<br>
<span class="Special">CTRL-P</span>&nbsp;を押すと、残りの部分が入力されます。<br>
例えば、C プログラムを書いていて、次のように入力したいとします:<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="PreProc">total = ch_array[0] + ch_array[1] + ch_array[2];</span><br>
<br>
まず、次のように入力してください:<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="PreProc">total = ch_array[0] + ch_</span><br>
<br>
ここで、<span class="Special">CTRL-P</span>&nbsp;コマンドを使って単語を補完します。カーソル直前の文字列にマッチ<br>
する単語が検索されます。この場合なら、&quot;ch_&quot; にマッチする単語、つまり<br>
&quot;ch_array&quot; がヒットします。したがって、<span class="Special">CTRL-P</span>&nbsp;を押すと次のようになります:<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="PreProc">total = ch_array[0] + ch_array</span><br>
<br>
続けて入力し、次のようになりました (末尾に空白があります):<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="PreProc">total = ch_array[0] + ch_array[1] +&nbsp;</span><br>
<br>
さて、ここで&nbsp;<span class="Special">CTRL-P</span>&nbsp;を押すと再びカーソル直前の文字列が補完されます。今回は文字<br>
が無いので、最初に見つかった単語、つまり &quot;ch_array&quot; が補完されます。もう一度<br>
<span class="Special">CTRL-P</span>&nbsp;を押すと、さらに次の候補が補完されます。この場合は &quot;total&quot; です。もう一<br>
度&nbsp;<span class="Special">CTRL-P</span>&nbsp;を押せばさらに次の候補が補完されます。次の単語が見つからなかった場合<br>
は元の文字列に戻ります。この例では空文字列です。四度目に&nbsp;<span class="Special">CTRL-P</span>&nbsp;を押すと再び最<br>
初の &quot;ch_array&quot; が補完されます。<br>
<br>
前方検索する場合は&nbsp;<span class="Special">CTRL-N</span>&nbsp;を使います。検索はファイル終端を超えて処理されるの<br>
で、<span class="Special">CTRL-N</span>&nbsp;と&nbsp;<span class="Special">CTRL-P</span>&nbsp;は順番が違うだけで、同じ単語が検索されます。Hint:&nbsp;<span class="Special">CTRL-N</span><br>
は Next-match (次の候補)、<span class="Special">CTRL-P</span>&nbsp;は Previous-match (前の候補) です。<br>
<br>
単語の補完では、様々な場所から単語を検索できます。初期設定では、次の場所が検索<br>
されます:<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;1. カレントファイル<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;2. 他のウィンドウのファイル<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;3. ロードされたファイル (隠しバッファ)<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;4. ロードされてないファイル (休眠バッファ)<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;5. タグファイル<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;6. カレントファイルが #include しているファイル<br>
<br>
<br>
<span class="Statement">オプション</span><br>
<br>
検索場所の順番は&nbsp;<a class="Type" href="options.html#'complete'">'complete'</a>&nbsp;オプションで設定できます。<br>
<br>
検索には&nbsp;<a class="Type" href="options.html#'ignorecase'">'ignorecase'</a>&nbsp;オプションが使われます。このオプションがオンのときは、大<br>
文字と小文字は区別されません。<br>
<br>
<a class="Type" href="options.html#'infercase'">'infercase'</a>&nbsp;は補完用の特別なオプションです。大文字と小文字を区別しない<br>
(<a class="Type" href="options.html#'ignorecase'">'ignorecase'</a>&nbsp;がオンに設定されている) ときでも、自分で入力した文字の種類をその<br>
まま使えます。つまり、&quot;For&quot; と入力して &quot;fortunately&quot; がマッチしたとき、結果は<br>
&quot;Fortunately&quot; になります。<br>
<br>
<br>
<span class="Statement">補完タイプの指定</span><br>
<br>
補完したい単語の種類がわかっている場合は、次のコマンドで補完の種類を指定できま<br>
す:<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="Special">CTRL-X</span>&nbsp;<span class="Special">CTRL-F</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ファイル名<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="Special">CTRL-X</span>&nbsp;<span class="Special">CTRL-L</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 行全体<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="Special">CTRL-X</span>&nbsp;<span class="Special">CTRL-D</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; マクロ定義 (インクルードファイルの中も探す)<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="Special">CTRL-X</span>&nbsp;<span class="Special">CTRL-I</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; カレントファイルとインクルードファイル<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="Special">CTRL-X</span>&nbsp;<span class="Special">CTRL-K</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 辞書<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="Special">CTRL-X</span>&nbsp;<span class="Special">CTRL-T</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 同義語辞書 (シソーラス)<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="Special">CTRL-X</span>&nbsp;<span class="Special">CTRL-]</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; タグ<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="Special">CTRL-X</span>&nbsp;<span class="Special">CTRL-V</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Vim のコマンドライン<br>
<br>
補完を実行した後は、<span class="Special">CTRL-N</span>&nbsp;で次の候補、<span class="Special">CTRL-P</span>&nbsp;で前の候補を検索できます。<br>
各コマンドの詳細は&nbsp;<a class="Identifier" href="insert.html#ins-completion">ins-completion</a>&nbsp;を参照してください。<br>
<br>
<br>
<span class="Statement">ファイル名の補完</span><br>
<br>
例として&nbsp;<span class="Special">CTRL-X</span>&nbsp;<span class="Special">CTRL-F</span>&nbsp;を使って説明します。これはファイル名を補完するコマンド<br>
です。カレントディレクトリのファイルが検索され、カーソル直前の文字列にマッチす<br>
るファイル名が補完されます。<br>
例えば、カレントディレクトリに次のファイルがあるとします:<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;main.c&nbsp;&nbsp;sub_count.c&nbsp;&nbsp;sub_done.c&nbsp;&nbsp;sub_exit.c<br>
<br>
挿入モードに入って次のように入力します:<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="PreProc">The exit code is in the file sub</span><br>
<br>
そして、<span class="Special">CTRL-X</span>&nbsp;<span class="Special">CTRL-F</span>&nbsp;を入力します。カレントディレクトリから &quot;sub&quot; にマッチす<br>
るファイルが検索されます。最初にマッチするのは sub_count.c です。このファイル<br>
は求めているファイルではありませんでした。<span class="Special">CTRL-N</span>&nbsp;を押して次の候補を検索しましょ<br>
う。次に sub_done.c がマッチします。もう一度&nbsp;<span class="Special">CTRL-N</span>&nbsp;を押すと sub_exit.c がマッ<br>
チします。結果:<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="PreProc">The exit code is in the file sub_exit.c</span><br>
<br>
ファイル名の先頭を / (Unix) や C:\ (MS-Windows) で開始すれば、ファイルシステム<br>
全体からファイルを検索できます。例えば、&quot;/u&quot; と入力してから&nbsp;<span class="Special">CTRL-X</span>&nbsp;<span class="Special">CTRL-F</span>&nbsp;と入<br>
力すると &quot;/usr&quot; がヒットします (Unix の場合):<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="PreProc">the file is found in /usr/</span><br>
<br>
もう一度&nbsp;<span class="Special">CTRL-N</span>&nbsp;を押すと &quot;/u&quot; に戻ってしまいます。&quot;/usr/&quot; を確定してからさらに<br>
深い階層へ進みたい場合は再び&nbsp;<span class="Special">CTRL-X</span>&nbsp;<span class="Special">CTRL-F</span>&nbsp;を使います:<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="PreProc">the file is found in /usr/X11R6/</span><br>
<br>
もちろん、ファイル構成が違えば結果は異なるでしょう。検索結果はアルファベット順<br>
にソートされます。<br>
<br>
<br>
<span class="Statement">ソースコードの補完</span><br>
<br>
ソースコードは書式が決まっているので、より賢い補完を実装することができます。<br>
Vim ではそれをオムニ補完 (Omni completion) と呼びます。某エディタではインテリ<br>
センスと呼ばれていますが、それは商標です。<br>
<br>
オムニ補完のキーは&nbsp;<span class="Special">CTRL-X</span>&nbsp;<span class="Special">CTRL-O</span>&nbsp;です。O は Omni の頭文字なので覚えやすいでしょ<br>
う。C 言語のソースを使って説明します:<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="PreProc">{</span><br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="PreProc">struct foo *p;</span><br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="PreProc">p-&gt;</span><br>
<br>
カーソルは &quot;p-&gt;&quot; の後ろにあります。<span class="Special">CTRL-X</span>&nbsp;<span class="Special">CTRL-O</span>&nbsp;を押すと、&quot;struct foo&quot; のメン<br>
バが候補として表示されます。これは&nbsp;<span class="Special">CTRL-P</span>&nbsp;の補完とはまったく違います。<span class="Special">CTRL-P</span><br>
ではあらゆる単語が候補になりますが、オムニ補完は &quot;struct foo&quot; のメンバだけが補<br>
完されます。<br>
<br>
オムニ補完を使うには設定が必要です。最低でもファイルタイププラグインを有効にし<br>
ておく必要があります。vimrc に以下の行を書き加えてください:<br>
<div class="helpExample">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;filetype plugin on</div>
または:<br>
<div class="helpExample">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;filetype plugin indent on</div>
<br>
C 言語の場合はタグファイルを作成して&nbsp;<a class="Type" href="options.html#'tags'">'tags'</a>&nbsp;オプションを設定する必要がありま<br>
す。<a class="Identifier" href="insert.html#ft-c-omni">ft-c-omni</a>&nbsp;を参照してください。他のファイルタイプでも似たような設定が必要<br>
になります。<a class="Identifier" href="insert.html#compl-omni-filetypes">compl-omni-filetypes</a>&nbsp;を参照してください。オムニ補完は特定のファ<br>
イルタイプでしか利用できません。<a class="Type" href="options.html#'omnifunc'">'omnifunc'</a>&nbsp;オプションを確認し、オムニ補完が利<br>
用できるかどうか確認してください。<br>
<br>
<span class="PreProc">==============================================================================</span><br>
<a class="Constant" href="usr_24.html#24.4" name="24.4">24.4</a>&nbsp;&nbsp;挿入を繰り返す<br>
<br>
<span class="Special">CTRL-A</span>&nbsp;を押すと、前回の挿入モードで入力したテキストを挿入できます。<br>
例えば、次のようなファイルがあったとします:<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="PreProc">&quot;file.h&quot;</span><br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="PreProc">/* Main program begins */</span><br>
<br>
一行目の行頭に &quot;#include &quot; を挿入します:<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="PreProc">#include &quot;file.h&quot;</span><br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="PreProc">/* Main program begins */</span><br>
<br>
&quot;j^&quot; コマンドで次の行の行頭に移動し、再び &quot;#include &quot; を挿入してみます。次のよ<br>
うに入力しましょう:<br>
<br>
<div class="helpExample">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;i CTRL-A</div>
<br>
結果は次のようになります:<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="PreProc">#include &quot;file.h&quot;</span><br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="PreProc">#include /* Main program begins */</span><br>
<br>
<span class="Special">CTRL-A</span>&nbsp;は前回に入力したテキストを挿入するコマンドなので、&quot;#include &quot; が挿入さ<br>
れました。続けて &quot;main.h&quot;<span class="Special">&lt;Enter&gt;</span>&nbsp;と入力し、行を完成させましょう:<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="PreProc">#include &quot;file.h&quot;</span><br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="PreProc">#include &quot;main.h&quot;</span><br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="PreProc">/* Main program begins */</span><br>
<br>
<span class="Special">CTRL-@</span>&nbsp;コマンドは&nbsp;<span class="Special">CTRL-A</span>&nbsp;と同じことを実行してから挿入モードを抜けます。まった<br>
く同じ挿入を繰り返したいときに使います。<br>
<br>
<span class="PreProc">==============================================================================</span><br>
<a class="Constant" href="usr_24.html#24.5" name="24.5">24.5</a>&nbsp;&nbsp;隣の行からコピーする<br>
<br>
<span class="Special">CTRL-Y</span>&nbsp;コマンドを使うと、カーソルの上の文字を挿入できます。一つ上の行を複製し<br>
たい場合に便利です。例えば、次のような C 言語のコードがあるとして:<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="PreProc">b_array[i]-&gt;s_next = a_array[i]-&gt;s_next;</span><br>
<br>
&quot;s_next&quot; を &quot;s_prev&quot; に変えただけの同じ行を入力してみます。新しい行を開いて<br>
<span class="Special">CTRL-Y</span>&nbsp;を 14 回押して、&quot;next&quot; の &quot;n&quot; の直前まで進みます:<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="PreProc">b_array[i]-&gt;s_next = a_array[i]-&gt;s_next;</span><br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="PreProc">b_array[i]-&gt;s_</span><br>
<br>
そして &quot;prev&quot; と入力します:<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="PreProc">b_array[i]-&gt;s_next = a_array[i]-&gt;s_next;</span><br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="PreProc">b_array[i]-&gt;s_prev</span><br>
<br>
続けて、次の &quot;next&quot; まで&nbsp;<span class="Special">CTRL-Y</span>&nbsp;を押します。<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="PreProc">b_array[i]-&gt;s_next = a_array[i]-&gt;s_next;</span><br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="PreProc">b_array[i]-&gt;s_prev = a_array[i]-&gt;s_</span><br>
<br>
&quot;prev;&quot; と入力すれば、行が完成です。<br>
<br>
<span class="Special">CTRL-Y</span>&nbsp;と似たコマンドに&nbsp;<span class="Special">CTRL-E</span>&nbsp;があります。これはカーソルの下の文字を挿入する<br>
コマンドです。<br>
<br>
<span class="PreProc">==============================================================================</span><br>
<a class="Constant" href="usr_24.html#24.6" name="24.6">24.6</a>&nbsp;&nbsp;レジスタを挿入する<br>
<br>
<span class="Special">CTRL-R</span>&nbsp;<span class="Special">{register}</span>&nbsp;コマンドを使うと、レジスタの内容を挿入できます。長い単語を入<br>
力するのが簡単になります。例えば、次の行を入力したいとします。<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="PreProc">r = VeryLongFunction(a) + VeryLongFunction(b) + VeryLongFunction(c)</span><br>
<br>
関数名は別のファイルで定義されています。そのファイルを開いてカーソルを関数名の<br>
先頭に移動し、次のコマンドでレジスタ v にヤンクします:<br>
<br>
<div class="helpExample">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot;vyiw</div>
<br>
&quot;v はレジスタの指定、&quot;yiw&quot; は yank-inner-word (単語をヤンクする) です。さて、<br>
元のファイルに戻り、挿入モードを開始して次のように入力します:<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="PreProc">r =</span><br>
<br>
ここで、<span class="Special">CTRL-R</span>&nbsp;v を押して関数の名前を挿入します:<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="PreProc">r = VeryLongFunction</span><br>
<br>
続けて関数の引数などを入力し、関数名を入力するときになったら再び&nbsp;<span class="Special">CTRL-R</span>&nbsp;v を使<br>
います。<br>
同じことは補完を使ってもできますが、同じ文字で始まる単語がたくさんある場合には<br>
レジスタが便利です。<br>
<br>
レジスタの中に&nbsp;<span class="Special">&lt;BS&gt;</span>&nbsp;などの特殊な文字が含まれている場合、その文字は、実際にキー<br>
ボードから入力されたのと同じように処理されます。それが望みの動作ではない場合<br>
(例えば、<span class="Special">&lt;BS&gt;</span>&nbsp;をテキストとして挿入したい場合) は&nbsp;<span class="Special">CTRL-R</span>&nbsp;<span class="Special">CTRL-R</span>&nbsp;<span class="Special">{register}</span>&nbsp;を<br>
使ってください。<br>
<br>
<span class="PreProc">==============================================================================</span><br>
<a class="Constant" href="usr_24.html#24.7" name="24.7">24.7</a>&nbsp;&nbsp;短縮形 (Abbreviations)<br>
<br>
短縮形とは長い単語を置き換える短い単語のことです。例えば、&quot;ad&quot; は<br>
&quot;advertisement&quot; の短縮形です。Vim では、入力した短縮形を自動的に展開することが<br>
できます。<br>
&quot;ad&quot; を &quot;advertisement&quot; の短縮形として登録するには、次のコマンドを使います:<br>
<br>
<div class="helpExample">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:iabbrev ad advertisement</div>
<br>
これで、&quot;ad&quot; と入力すると、完全形の &quot;advertisement&quot; がテキストに挿入されます。<br>
短縮形の置き換えは、スペースなどの、単語の一部として認識されない文字を入力した<br>
ときに実行されます:<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;入力した文字&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;画面上での見え方<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="PreProc">I saw the a&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; I saw the a</span><br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="PreProc">I saw the ad&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;I saw the ad</span><br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="PreProc">I saw the ad&lt;Space&gt;&nbsp;&nbsp;&nbsp;&nbsp; I saw the advertisement&lt;Space&gt;</span><br>
<br>
&quot;ad&quot; と入力しただけでは展開されません。これは例えば &quot;add&quot; のような単語も入力で<br>
きるようにするためです。単語の境界が確定してから短縮形の展開が適用されます。<br>
<br>
<br>
<span class="Statement">複数の単語の短縮形</span><br>
<br>
複数の単語に展開される短縮形を定義できます。例えば、&quot;JB&quot; を &quot;Jack Benny&quot; の短<br>
縮形として登録するには、次のコマンドを使います:<br>
<br>
<div class="helpExample">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:iabbrev JB Jack Benny</div>
<br>
プログラムを書くとき、私は少し変った短縮形を使っています:<br>
<br>
<div class="helpExample">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:iabbrev #b /****************************************<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:iabbrev #e &lt;Space&gt;****************************************/</div>
<br>
これはコメントブロックを作成するときに使います。コメントを開始するときに #b で<br>
最初の行を描き、コメントを書いてから、#e で末尾の行を描きます。#e の展開形がス<br>
ペースで始まっています。別の言い方をすれば、最初の二文字がスペースとスターに<br>
なっています。通常、短縮形と展開形の間の空白は無視されるので、スペースを入れた<br>
い場合は &lt;, S, p, a, c, e, &gt; という 7 文字の特殊な表記を使います。<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="Todo">Note</span>:<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot;:iabbrev&quot; は入力するのが長くて大変なので、&quot;:iab&quot; でも構いません。<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;これは短縮コマンドの短縮形です!<br>
<br>
<br>
<span class="Statement">入力ミスを直す</span><br>
<br>
入力ミスの癖ってありますよね。例えば、&quot;the&quot; と入力するはずが &quot;teh&quot; になってし<br>
まったり。短縮形を使って修正しましょう:<br>
<br>
<div class="helpExample">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:abbreviate teh the</div>
<br>
このような短縮形のリストを作成し、入力ミスの癖を見つけたら追加しましょう。<br>
<br>
<br>
<span class="Statement">短縮形を一覧表示する</span><br>
<br>
&quot;:abbreviate&quot; コマンドで短縮形の一覧を表示できます:<br>
<br>
<div class="helpExample">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:abbreviate<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;i&nbsp;&nbsp;#e&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ****************************************/<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;i&nbsp;&nbsp;#b&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/****************************************<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;i&nbsp;&nbsp;JB&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Jack Benny<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;i&nbsp;&nbsp;ad&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;advertisement<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;!&nbsp;&nbsp;teh&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; the</div>
<br>
行頭の &quot;i&quot; は挿入モードの意味です。その短縮形は挿入モードの中だけで有効です。<br>
他にも、次のような文字が表示されます:<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;c&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; コマンドラインモード&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:cabbrev<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;!&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 挿入モードとコマンドラインモード&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:abbreviate<br>
<br>
コマンドラインモードで短縮形が役に立つことはあまりないので、&quot;iabbrev&quot; コマンド<br>
を主に使うことになるでしょう。&quot;iabbrev&quot; なら、次のようなコマンドで &quot;ad&quot; が展開<br>
される心配はありません:<br>
<br>
<div class="helpExample">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:edit ad</div>
<br>
<br>
<span class="Statement">短縮形の削除</span><br>
<br>
短縮形を取り除くには &quot;:unabbreviate&quot; コマンドを使います。次のような短縮形が登<br>
録されているなら:<br>
<br>
<div class="helpExample">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:abbreviate @f fresh</div>
<br>
次のコマンドで削除できます:<br>
<br>
<div class="helpExample">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:unabbreviate @f</div>
<br>
このコマンドを入力すると @f が &quot;fresh&quot; に展開されてしまいますが、心配はいりま<br>
せん。コマンドは正しく処理されます (ただし、&quot;fresh&quot; という別の短縮形が定義され<br>
ている場合は期待した動作になりません。まぁそんなことはほとんどないはずですが)。<br>
すべての短縮形を削除するには次のコマンドを使います:<br>
<br>
<div class="helpExample">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:abclear</div>
<br>
&quot;:unabbreviate&quot; と &quot;:abclear&quot; にも、挿入モード用 (&quot;:iunabbreviate&quot; と<br>
&quot;:iabclear&quot;) とコマンドライン用 (&quot;:cunabbreviate&quot; と &quot;:cabclear&quot;) があります。<br>
<br>
<br>
<span class="Statement">短縮形の再マップ</span><br>
<br>
短縮形を定義するときに注意すべき点がもう一つあります。展開された文字列がマップ<br>
されないようにしなくてはなりません。例をあげましょう:<br>
<br>
<div class="helpExample">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:abbreviate @a adder<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:imap dd disk-door</div>
<br>
&quot;@a&quot; を入力すると &quot;adisk-doorer&quot; になってしまいます。これは意図した動作ではな<br>
いはずです。これを避けるには、&quot;:noreabbrev&quot; コマンドを使います。&quot;:abbreviate&quot;<br>
と機能は同じですが、展開結果にマップが適用されません:<br>
<br>
<div class="helpExample">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:noreabbrev @a adder</div>
<br>
これで、展開結果がマップされなくなります。<br>
<br>
<span class="PreProc">==============================================================================</span><br>
<a class="Constant" href="usr_24.html#24.8" name="24.8">24.8</a>&nbsp;&nbsp;特殊な文字を入力する<br>
<br>
<span class="Special">CTRL-V</span>&nbsp;コマンドを使うと、その次に入力した文字をそのまま挿入できます。つまり、<br>
文字の特殊効果が無視されます。例えば、このように入力すると:<br>
<br>
<div class="helpExample">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;CTRL-V &lt;Esc&gt;</div>
<br>
エスケープ文字が挿入されます。挿入モードは終了しません。(<span class="Special">CTRL-V</span>&nbsp;の後ろの空白は<br>
見やすくするためのものなので、実際には入力しないでください)<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="Todo">Note</span>:<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;MS-Windows では&nbsp;<span class="Special">CTRL-V</span>&nbsp;はテキストのペーストに使われています。<span class="Special">CTRL-V</span>&nbsp;の<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;代わりに&nbsp;<span class="Special">CTRL-Q</span>&nbsp;を使ってください。Unixでは逆に一部の端末で&nbsp;<span class="Special">CTRL-Q</span>&nbsp;に特<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;別な意味があるので使えないかもしれません。<br>
<br>
また、<span class="Special">CTRL-V</span>&nbsp;<span class="Special">{digits}</span>&nbsp;コマンドを使うと、文字コードを 10 進数で指定して、その文<br>
字を入力できます。例えば、文字コード 127 は&nbsp;<span class="Special">&lt;Del&gt;</span>&nbsp;文字 (<span class="Special">&lt;Del&gt;</span>&nbsp;*キー*と同じとは<br>
限りません) です。<span class="Special">&lt;Del&gt;</span>&nbsp;を挿入するには次のように入力します:<br>
<br>
<div class="helpExample">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;CTRL-V 127</div>
<br>
同じやりかたで文字コード 255 までの文字を入力できます。文字コードが 2 桁以下の<br>
場合は、数字以外の文字を入力してコマンドを確定してください。<br>
数字以外の文字を入力したくない場合は、数値が 3 桁になるように 1 つか 2 つの<br>
&quot;0&quot; を数値の前に付けてください。<br>
次のコマンドはいずれも&nbsp;<span class="Special">&lt;Tab&gt;</span>&nbsp;と &quot;.&quot; を挿入します:<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="Special">CTRL-V</span>&nbsp;9.<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="Special">CTRL-V</span>&nbsp;09.<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="Special">CTRL-V</span>&nbsp;009.<br>
<br>
文字コードは 16 進数でも指定できます。その場合は&nbsp;<span class="Special">CTRL-V</span>&nbsp;の直後に &quot;x&quot; を指定し<br>
ます:<br>
<br>
<div class="helpExample">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;CTRL-V x7f</div>
<br>
この場合もコード 255 (<span class="Special">CTRL-V</span>&nbsp;xff) までの文字が入力できます。&quot;o&quot; で 8 進数の数<br>
値を指定することもできます。他にも &quot;u&quot; と &quot;U&quot; でそれぞれ 16 ビットと 32 ビット<br>
の文字コード (例えば Unicode の文字) を指定できます:<br>
<br>
<div class="helpExample">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;CTRL-V o123<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;CTRL-V u1234<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;CTRL-V U12345678</div>
<br>
<span class="PreProc">==============================================================================</span><br>
<a class="Constant" href="usr_24.html#24.9" name="24.9">24.9</a>&nbsp;&nbsp;ダイグラフ (Digraph)<br>
<br>
例えば、コピーライト文字 (©) など、キーボードに無い文字がいくつかあります。そ<br>
のような文字を Vim で入力するにはダイグラフを使います。つまり、二文字で一文字<br>
を表現します。例えば、コピーライト文字 (©) を入力するには、次のようにします:<br>
<br>
<div class="helpExample">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;CTRL-K Co</div>
<br>
使用できるダイグラフの一覧を表示するには、次のコマンドを使います:<br>
<br>
<div class="helpExample">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:digraphs</div>
<br>
一部抜粋:<br>
<br>
&nbsp;&nbsp;<span class="PreProc">AC ~_ 159&nbsp;&nbsp;NS |&nbsp;&nbsp;160&nbsp;&nbsp;!I ¡&nbsp;&nbsp;161&nbsp;&nbsp;Ct ¢&nbsp;&nbsp;162&nbsp;&nbsp;Pd £&nbsp;&nbsp;163&nbsp;&nbsp;Cu ¤&nbsp;&nbsp;164&nbsp;&nbsp;Ye ¥&nbsp;&nbsp;165</span><br>
&nbsp;&nbsp;<span class="PreProc">BB ¦&nbsp;&nbsp;166&nbsp;&nbsp;SE §&nbsp;&nbsp;167&nbsp;&nbsp;': ¨&nbsp;&nbsp;168&nbsp;&nbsp;Co ©&nbsp;&nbsp;169&nbsp;&nbsp;-a ª&nbsp;&nbsp;170&nbsp;&nbsp;&lt;&lt; «&nbsp;&nbsp;171&nbsp;&nbsp;NO ¬&nbsp;&nbsp;172</span><br>
&nbsp;&nbsp;<span class="PreProc">-- ­&nbsp;&nbsp;173&nbsp;&nbsp;Rg ®&nbsp;&nbsp;174&nbsp;&nbsp;'m ¯&nbsp;&nbsp;175&nbsp;&nbsp;DG °&nbsp;&nbsp;176&nbsp;&nbsp;+- ±&nbsp;&nbsp;177&nbsp;&nbsp;2S ²&nbsp;&nbsp;178&nbsp;&nbsp;3S ³&nbsp;&nbsp;179</span><br>
<br>
これを見れば、例えば&nbsp;<span class="Special">CTRL-K</span>&nbsp;Pd でポンド記号 (£) が入力できることがわかります。<br>
文字番号は 163 (10進数) です。<br>
Pd は Pound (ポンド) の略です。ほとんどのダイグラフには、生成される文字が連想<br>
しやすい文字が割り当てられています。法則は表を見ればだいたいわかると思います。<br>
ダイグラフの一文字目と二文字目は逆の順番で入力しても構いません。ただし、その組<br>
み合わせが他のダイグラフで使われていない場合に限ります。すなわち、<span class="Special">CTRL-K</span>&nbsp;dP も<br>
ポンド記号になります。&quot;dP&quot; という組み合わせが他に使われていないので、&quot;Pd&quot; のダ<br>
イグラフが使われるのです。<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="Todo">Note</span>:<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ダイグラフはユーザーが使っている (と Vim が認識している) 文字セットに<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;依存します。&quot;:digraphs&quot; を使って、利用可能なダイグラフを確認してくださ<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;い。<br>
<br>
自分でダイグラフを定義することもできます。例:<br>
<br>
<div class="helpExample">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:digraph a&quot; ä</div>
<br>
<span class="Special">CTRL-K</span>&nbsp;a&quot; を入力すると ä になります。文字コードを 10 進数で指定することもでき<br>
ます。次のコマンドは上記のコマンドと同じです:<br>
<br>
<div class="helpExample">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:digraph a&quot; 228</div>
<br>
ダイグラフについての詳細は&nbsp;<a class="Identifier" href="digraph.html#digraphs">digraphs</a>&nbsp;を参照してください。<br>
他にも、キーマップを使って特殊な文字を入力することもできます。詳しくは&nbsp;<a class="Identifier" href="usr_45.html#45.5">45.5</a><br>
参照。<br>
<br>
<span class="PreProc">==============================================================================</span><br>
<a class="Constant" href="usr_24.html#24.10" name="24.10">24.10</a>&nbsp;ノーマルモードコマンド<br>
<br>
挿入モードで使えるコマンドはそれほど多くありませんが、ノーマルモードにはたくさ<br>
んのコマンドがあります。それらのコマンドを使うには&nbsp;<span class="Special">&lt;Esc&gt;</span>&nbsp;で挿入モードを抜けて、<br>
ノーマルモードコマンドを実行し、&quot;i&quot; または &quot;a&quot; で挿入モードに戻ってこなければ<br>
なりません。<br>
もっと簡単な方法があります。<span class="Special">CTRL-O</span>&nbsp;<span class="Special">{command}</span>&nbsp;を使えばノーマルモードコマンドを<br>
挿入モードの中で実行できます。例えば、次のコマンドでカーソル位置から行末まで削<br>
除できます:<br>
<br>
<div class="helpExample">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;CTRL-O D</div>
<br>
この方法で実行できるのは一つのコマンドだけです。ただし、レジスタやカウントの指<br>
定はできます。もう少し複雑な例:<br>
<br>
<div class="helpExample">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;CTRL-O &quot;g3dw</div>
<br>
三つの単語を削除してレジスタ g に格納します。<br>
<br>
<span class="PreProc">==============================================================================</span><br>
<br>
次章:&nbsp;<a class="Identifier" href="usr_25.html">usr_25.txt</a>&nbsp;&nbsp;テキストの整形<br>
<br>
Copyright: see&nbsp;<a class="Identifier" href="usr_01.html#manual-copyright">manual-copyright</a>&nbsp;&nbsp;vim:tw=78:ts=8:noet:ft=help:norl:<br>
</div>
