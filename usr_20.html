---
layout: vimdoc
helpname: 'usr_20'
---
<div id='vimCodeElement'>
<a class="Constant" href="usr_20.html" name="usr_20.txt">usr_20.txt</a>&nbsp;&nbsp;&nbsp;&nbsp;For&nbsp;<span class="Identifier">Vim バージョン 9.0.</span>&nbsp;&nbsp;Last change: 2021 Nov 18<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; VIM USER MANUAL - by Bram Moolenaar<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;コマンドラインを素早く入力する<br>
<br>
<br>
Vim にはコマンド入力を簡単にするための一般的な機能が備わっています。コロン (:)<br>
コマンドでは短縮入力、編集、履歴、文脈依存の補完機能が利用できます。<br>
<br>
<a class="Identifier" href="usr_20.html#20.1">20.1</a>&nbsp;&nbsp;コマンドライン編集<br>
<a class="Identifier" href="usr_20.html#20.2">20.2</a>&nbsp;&nbsp;コマンドライン短縮入力<br>
<a class="Identifier" href="usr_20.html#20.3">20.3</a>&nbsp;&nbsp;コマンドライン補完<br>
<a class="Identifier" href="usr_20.html#20.4">20.4</a>&nbsp;&nbsp;コマンドライン履歴<br>
<a class="Identifier" href="usr_20.html#20.5">20.5</a>&nbsp;&nbsp;コマンドラインウィンドウ<br>
<br>
次章:&nbsp;<a class="Identifier" href="usr_21.html">usr_21.txt</a>&nbsp;&nbsp;中断と再開<br>
前章:&nbsp;<a class="Identifier" href="usr_12.html">usr_12.txt</a>&nbsp;&nbsp;便利な小技<br>
目次:&nbsp;<a class="Identifier" href="usr_toc.html">usr_toc.txt</a><br>
<br>
<span class="PreProc">==============================================================================</span><br>
<a class="Constant" href="usr_20.html#20.1" name="20.1">20.1</a>&nbsp;&nbsp;コマンドライン編集<br>
<br>
コロン (:) コマンドや検索コマンド (/ or ?) を使うとき、カーソルは画面の一番下<br>
に表示されます。そこにコマンドや検索パターンを入力するわけです。その場所を「コ<br>
マンドライン」と呼びます。<br>
<br>
コマンドラインの編集で最もわかりやすいのは&nbsp;<span class="Special">&lt;BS&gt;</span>&nbsp;でしょう。カーソルの直前の文字<br>
を削除できます。他の位置にある文字を削除したい場合は、矢印キーでカーソルを動か<br>
してから&nbsp;<span class="Special">&lt;BS&gt;</span>&nbsp;を押してください。<br>
例えば、次のように入力して:<br>
<br>
<div class="helpExample">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:s/col/pig/</div>
<br>
<span class="Special">&lt;Enter&gt;</span>&nbsp;を押す前になって、&quot;col&quot; が &quot;cow&quot; の入力ミスであることに気づきました。<br>
これを修正するには、左矢印キー (<span class="Special">&lt;Left&gt;</span>) を 5 回押して &quot;col&quot; の直後にカーソルを<br>
動かしてから、<span class="Special">&lt;BS&gt;</span>&nbsp;と &quot;w&quot; を入力します:<br>
<br>
<div class="helpExample">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:s/cow/pig/</div>
<br>
修正したら、その場で&nbsp;<span class="Special">&lt;Enter&gt;</span>&nbsp;を押しましょう。コマンドを実行するためにカーソル<br>
を行末まで動かす必要はありません。<br>
<br>
コマンドラインでのカーソル移動には次のキーがよく使われます:<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="Special">&lt;Left&gt;</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;1 文字左<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="Special">&lt;Right&gt;</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 1 文字右<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="Special">&lt;S-Left&gt;</span>&nbsp;or&nbsp;<span class="Special">&lt;C-Left&gt;</span>&nbsp;&nbsp;&nbsp;&nbsp;1 単語左<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="Special">&lt;S-Right&gt;</span>&nbsp;or&nbsp;<span class="Special">&lt;C-Right&gt;</span>&nbsp;&nbsp;1 単語右<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="Special">CTRL-B</span>&nbsp;or&nbsp;<span class="Special">&lt;Home&gt;</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;行頭<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="Special">CTRL-E</span>&nbsp;or&nbsp;<span class="Special">&lt;End&gt;</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 行末<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="Todo">Note</span>:<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="Special">&lt;S-Left&gt;</span>&nbsp;(シフトキーを押したまま左矢印キーを押す) と&nbsp;<span class="Special">&lt;C-Left&gt;</span>&nbsp;(コント<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ロールキーを押したまま左矢印キーを押す) が機能しないキーボードもありま<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;す。その他のシフトキーとコントロールキーの組み合せも同様に、機能しない<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ことがあります。<br>
<br>
カーソルはマウスでも動かせます。<br>
<br>
<br>
<span class="Statement">削除</span><br>
<br>
上述のとおり、<span class="Special">&lt;BS&gt;</span>&nbsp;でカーソルの直前の文字を削除できます。単語を削除するには<br>
<span class="Special">CTRL-W</span>&nbsp;を使います。<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="PreProc">/the fine pig</span><br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="Special">CTRL-W</span><br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="PreProc">/the fine</span><br>
<br>
<span class="Special">CTRL-U</span>&nbsp;ですべてのテキストを削除できます。コマンドを最初から入力し直したいとき<br>
に使ってください。<br>
<br>
<br>
<span class="Statement">上書き</span><br>
<br>
<span class="Special">&lt;Insert&gt;</span>&nbsp;キーを押すと、挿入と上書きが切り替わります。次のテキストを使って説明<br>
します:<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="PreProc">/the fine pig</span><br>
<br>
<span class="Special">&lt;S-Left&gt;</span>&nbsp;を 2 回押して (<span class="Special">&lt;S-Left&gt;</span>&nbsp;が機能しない場合は&nbsp;<span class="Special">&lt;Left&gt;</span>&nbsp;を 8 回押して)<br>
&quot;fine&quot; の先頭にカーソルを動かします。<span class="Special">&lt;Insert&gt;</span>&nbsp;を押して上書きに切り替え、<br>
&quot;great&quot; と入力します:<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="PreProc">/the greatpig</span><br>
<br>
おっと、スペースが消えてしまいました。ここで&nbsp;<span class="Special">&lt;BS&gt;</span>&nbsp;を押すと &quot;t&quot; が削除されてし<br>
まいます (置換モードとは違いますね)。<span class="Special">&lt;Insert&gt;</span>&nbsp;を押して、上書きから挿入に切り替<br>
え、スペースを入力します:<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="PreProc">/the great pig</span><br>
<br>
<br>
<span class="Statement">キャンセル</span><br>
<br>
: または / コマンドを入力した後で、そのコマンドの実行をキャンセルしたくなった<br>
場合は、<span class="Special">CTRL-C</span>&nbsp;または&nbsp;<span class="Special">&lt;Esc&gt;</span>&nbsp;を押してください。<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="Todo">Note</span>:<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="Special">&lt;Esc&gt;</span>&nbsp;キーはどこでも使える「脱出」キーですが、残念なことに、古き良き<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Vi では、コマンドラインで&nbsp;<span class="Special">&lt;Esc&gt;</span>&nbsp;を押すと、コマンドが実行されてしまいま<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;す。これはおそらくバグなので、Vim では&nbsp;<span class="Special">&lt;Esc&gt;</span>&nbsp;でコマンドをキャンセルで<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;きるようになっています。ただし、<a class="Type" href="options.html#'cpoptions'">'cpoptions'</a>&nbsp;を設定して Vi 互換の動作に<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;変更することもできます。また、マップが適用されたときは (それが Vi 用に<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;書かれたものであってもなくても)&nbsp;<span class="Special">&lt;Esc&gt;</span>&nbsp;は Vi 互換の動作をします。<span class="Special">CTRL-C</span><br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;を使えば設定に関係なくキャンセルできます。<br>
<br>
コマンドラインの先頭にカーソルがあるときに&nbsp;<span class="Special">&lt;BS&gt;</span>&nbsp;キーを押すとコマンドをキャンセ<br>
ルできます。これは行頭にある &quot;:&quot; や &quot;/&quot; を削除するような感覚です。<br>
<br>
<span class="PreProc">==============================================================================</span><br>
<a class="Constant" href="usr_20.html#20.2" name="20.2">20.2</a>&nbsp;&nbsp;コマンドライン短縮入力<br>
<br>
とても長い名前の &quot;:&quot; コマンドがいくつかあります。&quot;:substitute&quot; が &quot;:s&quot; と短縮<br>
できることは既に説明しましたが、これは何も特別なことではありません。すべての<br>
&quot;:&quot; コマンドが短縮できます。<br>
<br>
コマンドはどこまで短縮できるでしょうか。アルファベットは 26 文字ですが、コマン<br>
ドはそれよりたくさんあります。例えば、&quot;:set&quot; の先頭は &quot;:s&quot; ですが、&quot;:s&quot; では<br>
&quot;:set&quot; を実行できません。&quot;:set&quot; の短縮形は &quot;:se&quot; です。<br>
二つのコマンドが同じ名前に短縮できたとしても、最短の名前を使えるのは一つのコマ<br>
ンドだけです。その決定方法に明確なルールはないので、個別に覚えるしかありませ<br>
ん。コマンドの最短の名前はヘルプファイルに記述されています。例:<br>
<br>
<div class="helpExample">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:s[ubstitute]</div>
<br>
これは &quot;:substitute&quot; の短縮形が &quot;:s&quot; であることを示しています。それ以降の文字<br>
は任意です。&quot;:su&quot; でも &quot;:sub&quot; でも動作します。<br>
<br>
ユーザーマニュアルではコマンドの長い名前と短い名前の両方が使われますが、読み難<br>
い短縮形は使われません。例えば、&quot;:function&quot; は &quot;:fu&quot; と短縮できますが、これだ<br>
と大半の人が何の略なのか理解できないので &quot;:fun&quot; が使われます。(Vim に &quot;:funny&quot;<br>
コマンドはありませんが、もしあれば、&quot;:fun&quot; でも混乱を招きますよね。)<br>
<br>
Vim script を書くときはコマンドの長い名前を使うことをお勧めします。そうしてお<br>
けば、後で変更しようと思ったときに読むのが楽です。しかし、&quot;:w&quot; (&quot;:write&quot;)<br>
や &quot;:r&quot; (&quot;:read&quot;) のような頻繁に使われるコマンドなら短縮形を使っても構わないで<br>
しょう。<br>
特にややこしいのは &quot;:end&quot; で、これは &quot;:endif&quot;、&quot;:endwhile&quot; あるいは<br>
&quot;:endfunction&quot; を表しているのかもしれません。そのため、常に長い名前を使うよう<br>
にしましょう。<br>
<br>
<br>
<span class="Statement">オプションの短い名前</span><br>
<br>
ユーザーマニュアルではオプションの長い名前が使われますが、ほとんどのオプション<br>
には短い名前があります。&quot;:&quot; コマンドと違い、オプションの短い名前は一つしかあり<br>
ません。例えば、<a class="Type" href="options.html#'autoindent'">'autoindent'</a>&nbsp;の短い名前は&nbsp;<a class="Type" href="options.html#'ai'">'ai'</a>&nbsp;なので、次の二つのコマンドは同<br>
じ動作をします:<br>
<br>
<div class="helpExample">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:set autoindent<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:set ai</div>
<br>
オプションの長い名前と短い名前の一覧は&nbsp;<a class="Identifier" href="quickref.html#option-list">option-list</a>&nbsp;を参照してください。<br>
<br>
<span class="PreProc">==============================================================================</span><br>
<a class="Constant" href="usr_20.html#20.3" name="20.3">20.3</a>&nbsp;&nbsp;コマンドライン補完<br>
<br>
コマンドライン補完はこれだけでも Vi から Vim に乗り換えるに値する程の機能です。<br>
一度使ってしまったら、手放せなくなるでしょう。<br>
<br>
次のようなファイルを含むディレクトリがあるとします:<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;info.txt<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;intro.txt<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;bodyofthepaper.txt<br>
<br>
bodyofthepaper.txt を開くには次のコマンドを使います:<br>
<br>
<div class="helpExample">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:edit bodyofthepaper.txt</div>
<br>
いかにも打ち間違えそうです。もっと簡単にやりましょう:<br>
<br>
<div class="helpExample">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:edit b&lt;Tab&gt;</div>
<br>
どちらも結果は同じになります。どういうことでしょうか。<span class="Special">&lt;Tab&gt;</span>&nbsp;キーによってカーソ<br>
ル直前の単語 (この場合なら &quot;b&quot;) が補完されたのです。ディレクトリが検索され、<br>
&quot;b&quot; で始まるファイルが一つだけ見つかり、それはあなたが探しているファイルに違い<br>
ないので、その名前が補完されました。<br>
<br>
さて、次はこのように入力してみます:<br>
<br>
<div class="helpExample">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:edit i&lt;Tab&gt;</div>
<br>
ビープ音が鳴り、次のように表示されます:<br>
<br>
<div class="helpExample">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:edit info.txt</div>
<br>
ビープ音は複数のファイルが見つかったことを示しています。まずは (アルファベット<br>
順で) 最初のファイルが表示されます。もう一度&nbsp;<span class="Special">&lt;Tab&gt;</span>&nbsp;を押すと、次のようになりま<br>
す:<br>
<br>
<div class="helpExample">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:edit intro.txt</div>
<br>
つまり、最初の&nbsp;<span class="Special">&lt;Tab&gt;</span>&nbsp;で、探しているファイルが出てこなかったら、もう一度&nbsp;<span class="Special">&lt;Tab&gt;</span><br>
を押せばよいのです。ファイルがたくさんあるなら、一つずつ表示していきましょう。<br>
最後の補完候補を表示しているときに&nbsp;<span class="Special">&lt;Tab&gt;</span>&nbsp;を押すと、最初の状態に戻ります:<br>
<br>
<div class="helpExample">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:edit i</div>
<br>
また最初から補完候補を表示できます。つまり、補完候補は循環表示されます。<span class="Special">CTRL-P</span><br>
を使うと、逆方向に移動できます:<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;-------------------&nbsp;<span class="Special">&lt;Tab&gt;</span>&nbsp;-------------------------+<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="Special">&lt;Tab&gt;</span>&nbsp;--&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="Special">&lt;Tab&gt;</span>&nbsp;--&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:edit i&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; :edit info.txt&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; :edit intro.txt<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;--&nbsp;<span class="Special">CTRL-P</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;--&nbsp;<span class="Special">CTRL-P</span><br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; +----------------------&nbsp;<span class="Special">CTRL-P</span>&nbsp;------------------------&gt;<br>
<br>
<br>
<span class="Statement">文脈</span><br>
<br>
&quot;:edit i&quot; ではなく、&quot;:set i&quot; と入力してから&nbsp;<span class="Special">&lt;Tab&gt;</span>&nbsp;を押すと、次のようになりま<br>
す:<br>
<br>
<div class="helpExample">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:set icon</div>
<br>
どうして &quot;:set info.txt&quot; にならないのでしょうか。それは、Vim が文脈を認識して<br>
いるからです。補完される単語の種類は入力されたコマンドに依存します。&quot;:set&quot; コ<br>
マンドに指定するのはファイル名ではなくオプション名であることを Vim は知ってい<br>
るのです。<br>
上述の例と同様、<span class="Special">&lt;Tab&gt;</span>&nbsp;を入力すれば補完候補が一つずつ順番に表示されます。たいて<br>
いは、いくつかの文字を入力してから補完した方が素早く補完できます:<br>
<br>
<div class="helpExample">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:set isk&lt;Tab&gt;</div>
<br>
次のような結果になります:<br>
<br>
<div class="helpExample">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:set iskeyword</div>
<br>
さて、&quot;=&quot; を入力してから&nbsp;<span class="Special">&lt;Tab&gt;</span>&nbsp;を押してみましょう:<br>
<br>
<div class="helpExample">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:set iskeyword=@,48-57,_,192-255</div>
<br>
オプションの現在の設定が挿入されるので、それを編集することができます。<br>
<span class="Special">&lt;Tab&gt;</span>&nbsp;で補完されるのはその場所に入力すべき内容です。どのように動作するかは自分<br>
で試してみてください。期待したような結果にならないこともあると思いますが、それ<br>
は、Vim がその文脈を認識できなかったか、その文脈における補完が実装されていない<br>
かのどちらかです。その場合は&nbsp;<span class="Special">&lt;Tab&gt;</span>&nbsp;文字が挿入されます (画面上では ^I と表示さ<br>
れます)。<br>
<br>
<br>
<span class="Statement">補完候補一覧</span><br>
<br>
補完候補がたくさんあるとき、その一覧を確認することができます。それには&nbsp;<span class="Special">CTRL-D</span><br>
を使います。例えば、次のコマンドを入力してから&nbsp;<span class="Special">CTRL-D</span>&nbsp;を押してみます:<br>
<br>
<div class="helpExample">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:set is</div>
<br>
次のような結果になります:<br>
<br>
<div class="helpExample">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:set is<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;incsearch&nbsp;&nbsp;isfname&nbsp;&nbsp;&nbsp;&nbsp;isident&nbsp;&nbsp;&nbsp;&nbsp;iskeyword&nbsp;&nbsp;isprint<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:set is</div>
<br>
補完候補の一覧が表示され、また元の入力に戻ります。この一覧に期待した項目がある<br>
かどうか確認してください。ない場合は、<span class="Special">&lt;BS&gt;</span>&nbsp;でテキストを削除し、入力し直してく<br>
ださい。補完候補がたくさんある場合は、さらにいくつかの文字を入力してから&nbsp;<span class="Special">&lt;Tab&gt;</span><br>
を押して補完してください。<br>
注意深い方なら、候補一覧にある &quot;incsearch&quot; が &quot;is&quot; で始まっていないことに気づ<br>
いたと思います。&quot;is&quot; は &quot;incsearch&quot; の短縮形です。ほとんどのオプションには短い<br>
名前と長い名前がありますが、Vim は賢いので、オプションの短い名前を見て、長い名<br>
前に展開してくれます。<br>
<br>
<br>
<span class="Statement">さらに他にも</span><br>
<br>
<span class="Special">CTRL-L</span>&nbsp;コマンドを使うと、共通したところまで補完できます。例えば、&quot;info.txt&quot; と<br>
&quot;info_backup.txt&quot; というファイルがあって、&quot;:edit i&quot; と入力してから&nbsp;<span class="Special">CTRL-L</span>&nbsp;を押<br>
すと、&quot;:edit info&quot; になります。<br>
<br>
<a class="Type" href="options.html#'wildmode'">'wildmode'</a>&nbsp;オプションで補完の動作を変更できます。<br>
<a class="Type" href="options.html#'wildmenu'">'wildmenu'</a>&nbsp;オプションを設定すると補完候補をメニューのように表示できます。<br>
<a class="Type" href="options.html#'suffixes'">'suffixes'</a>&nbsp;オプションに優先度の低いファイルを指定しておくと、それらのファイル<br>
は補完候補の末尾に現れます。<br>
<a class="Type" href="options.html#'wildignore'">'wildignore'</a>&nbsp;オプションには補完候補として表示して欲しくないファイルを指定しま<br>
す。<br>
<br>
コマンドライン補完についての詳細は&nbsp;<a class="Identifier" href="cmdline.html#cmdline-completion">cmdline-completion</a>&nbsp;を参照してください。<br>
<br>
<span class="PreProc">==============================================================================</span><br>
<a class="Constant" href="usr_20.html#20.4" name="20.4">20.4</a>&nbsp;&nbsp;コマンドライン履歴<br>
<br>
履歴については三章で簡単に説明しました。簡単に言えば、<span class="Special">&lt;Up&gt;</span>&nbsp;キーで以前に入力し<br>
た古いコマンドラインを呼び出すことができる機能です。<span class="Special">&lt;Down&gt;</span>&nbsp;で新しい方のコマン<br>
ドに戻れます。<br>
<br>
履歴には5種類あります。ここでは &quot;:&quot; コマンドと検索コマンド (&quot;/&quot; or &quot;?&quot;) の履歴<br>
を説明します。&quot;/&quot; と &quot;?&quot; はどちらも検索コマンドなので、同じ履歴を共有します。<br>
他の3つの履歴は、式、デバッグモードコマンド、および input() 関数の入力行用で<br>
す。&nbsp;<a class="Identifier" href="cmdline.html#cmdline-history">cmdline-history</a><br>
<br>
例えば、&quot;:set&quot; コマンドを実行した後で、他のコマンドを 10 個実行し、再び &quot;:set&quot;<br>
コマンドを実行したいとします。&quot;:&quot; を押してから&nbsp;<span class="Special">&lt;Up&gt;</span>&nbsp;を 10 回押せばできますが、<br>
もっと簡単な方法があります:<br>
<br>
<div class="helpExample">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:se&lt;Up&gt;</div>
<br>
以前使った &quot;se&quot; で始まるコマンドに戻ります。これなら探していた &quot;:set&quot; コマンド<br>
に効率良くたどり着けるでしょう。少なくとも、何度も何度も&nbsp;<span class="Special">&lt;Up&gt;</span>&nbsp;を押す必要はあり<br>
ません (入力したすべてのコマンドが &quot;:set&quot; コマンドでもない限り)。<br>
<br>
<span class="Special">&lt;Up&gt;</span>&nbsp;キーを押すと、入力されたテキストと履歴のコマンドラインが比較され、マッチ<br>
した履歴だけが使われます。<br>
探していた履歴が見つからなかった場合は、<span class="Special">&lt;Down&gt;</span>&nbsp;で元に戻ってから正しく入力し直<br>
すか、<span class="Special">CTRL-U</span>&nbsp;を押して最初からやり直してください。<br>
<br>
履歴をすべて見るには次のコマンドを使います:<br>
<br>
<div class="helpExample">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:history</div>
<br>
&quot;:&quot; コマンドの履歴が表示されます。検索コマンドの履歴を表示するには、次のコマン<br>
ドを使います:<br>
<br>
<div class="helpExample">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:history /</div>
<br>
<span class="Special">&lt;Up&gt;</span>&nbsp;の代わりに&nbsp;<span class="Special">CTRL-P</span>&nbsp;を使うこともできますが、<span class="Special">CTRL-P</span>&nbsp;の前に入力されていたテキ<br>
ストは無視されます。同様に、<span class="Special">&lt;Down&gt;</span>&nbsp;の代わりに&nbsp;<span class="Special">CTRL-N</span>&nbsp;を使うこともできます。<br>
<span class="Special">CTRL-P</span>&nbsp;は previous (前)、<span class="Special">CTRL-N</span>&nbsp;は next (次) という意味です。<br>
<br>
<span class="PreProc">==============================================================================</span><br>
<a class="Constant" href="usr_20.html#20.5" name="20.5">20.5</a>&nbsp;&nbsp;コマンドラインウィンドウ<br>
<br>
コマンドラインでの文字入力は挿入モードでの文字入力とは違います。テキストを編集<br>
するための多くのコマンドが使えません。通常のコマンドライン入力ではそれほど問題<br>
になりませんが、複雑なコマンドを入力しなければならないときもあるでしょう。その<br>
ようなときは、コマンドラインウィンドウが便利です。<br>
<br>
次のコマンドでコマンドラインウィンドウを開いてください:<br>
<br>
<div class="helpExample">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;q:</div>
<br>
画面の下の方に (小さな) ウィンドウが作成されます。ウィンドウにはコマンドライン<br>
履歴が表示され、最終行には空行があります:<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+-------------------------------------+<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|other window&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|~&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|file.txt=============================|<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|:e c&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|:e config.h.in&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|:set path=.,/usr/include,,&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|:set iskeyword=@,48-57,_,192-255&nbsp;&nbsp;&nbsp;&nbsp; |<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|:set is&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|:q&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|command-line=========================|<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+-------------------------------------+<br>
<br>
ウィンドウを開いた後はノーマルモードになっています。&quot;hjkl&quot; キーで移動できます。<br>
例えば、&quot;5k&quot; を入力し、&quot;:e config.h.in&quot; の行に移動します。&quot;$h&quot; で &quot;in&quot; の &quot;i&quot;<br>
に移動し &quot;cwout&quot; と入力します。行が次のように変更されました:<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="PreProc">:e config.h.out</span><br>
<br>
<span class="Special">&lt;Enter&gt;</span>&nbsp;を押すとこのコマンドが実行され、コマンドラインウィンドウが閉じます。<br>
<span class="Special">&lt;Enter&gt;</span>&nbsp;コマンドで現在行が実行されます。挿入モードでもノーマルモードでも同じ動<br>
作です。<br>
コマンドラインウィンドウでの編集は失われます。つまり、コマンドライン履歴は変更<br>
されません。ただし、実行したコマンドは、通常どおり、履歴に追加されます。<br>
<br>
コマンドラインウィンドウは、実行したいコマンドに似たコマンドを履歴の一覧から探<br>
し、それをちょっと変更して再実行するような場合に便利です。コマンドラインウィン<br>
ドウでは検索コマンドも使えます。<br>
上の例の場合なら、&quot;?config&quot; という検索コマンドを実行すれば、以前に実行した<br>
&quot;config&quot; を含んでいるコマンドを探せます。これは少し不思議ですね。コマンドライ<br>
ンを使ってコマンドラインウィンドウの中を検索しているのですから。しかし、検索コ<br>
マンドを入力するための新たなコマンドラインウィンドウを作成することはできませ<br>
ん。コマンドラインウィンドウは常に一つだけです。<br>
<br>
<span class="PreProc">==============================================================================</span><br>
<br>
次章:&nbsp;<a class="Identifier" href="usr_21.html">usr_21.txt</a>&nbsp;&nbsp;中断と再開<br>
<br>
Copyright: see&nbsp;<a class="Identifier" href="usr_01.html#manual-copyright">manual-copyright</a>&nbsp;&nbsp;vim:tw=78:ts=8:noet:ft=help:norl:<br>
</div>
